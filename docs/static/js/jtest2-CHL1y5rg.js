import{d as te,a as k,r as q,m as oe,y as le,k as c,e as g,g as h,f as l,w as p,h as d,F as a,l as ie,b as f,i as _,j as T,t as re,I as se,_ as ge}from"./index-DXFWvrCK.js";import{_ as ne}from"./KTextWithBg.vue_vue_type_script_setup_true_lang-nsCnclvr.js";import de from"./DrawingTool-DQuwF2-1.js";import{v as ce}from"./v4-B_KD8BnD.js";const he={class:"main-container"},ae={class:"content-wrapper"},fe={class:"main-content"},ue={class:"p-2 flex justify-between items-center border-left-blue"},ye={class:"flex gap-2"},pe={class:"relative"},ke={class:"sidebar"},_e={class:"controls"},ve={class:"flex justify-between items-center"},be={class:"inline-block"},Le={class:"mt-10"},Re={class:"flex justify-between items-center mb-2"},Me=te({__name:"jtest2",setup(We){const B=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F06292","#7986CB","#9575CD","#64B5F6","#4DB6AC","#81C784","#FFD54F"],E=["#fff","#ffe0b2","#ffccbc","#d1c4e9","#b3e5fc","#b2dfdb","#c8e6c9","#ffecb3"],A=k(null),N=k(!1),V=k(null),W=k({x:0,y:0}),u=q({width:900,height:560}),n=q([]),F=k(5),x=k(null),b=k(!1),C=k([]),w=k(400),H=()=>{const o={head:["circle","square","ellipse","triangle"],face:["normal","happy","angry"],arm:["straight","bent","wave"],leg:["line","arrow","double-arrow","lightning"],accessory:["none","hat","glasses"],animation:["walk","run","bounce","dance","float"]},i=o.head[Math.floor(Math.random()*o.head.length)],t=15+Math.random()*10;let r=150+Math.random()*(u.width-300),s=w.value;return{isHovered:!1,id:ce(),x:r,y:s,originalX:r,originalY:s,rotation:Math.random()*10-5,color:B[Math.floor(Math.random()*B.length)],headType:i,headColor:E[Math.floor(Math.random()*E.length)],headRadius:t,faceType:o.face[Math.floor(Math.random()*o.face.length)],bodyLength:40+Math.random()*30,bodyWidth:2+Math.random()*2,armType:o.arm[Math.floor(Math.random()*o.arm.length)],armLength:25+Math.random()*20,armWidth:2+Math.random()*2,armY:10+Math.random()*10,legType:o.leg[Math.floor(Math.random()*o.leg.length)],legLength:30+Math.random()*20,legWidth:2+Math.random()*2,legScale:{left:1,right:1},legAngle:{left:0,right:0},accessory:o.accessory[Math.floor(Math.random()*o.accessory.length)],animationType:o.animation[Math.floor(Math.random()*o.animation.length)]}},Y=()=>{if(n.length>=15){se("最多只能添加15个火柴人",{type:"warning"});return}n.push(H())},$=()=>{D(),n.length=0;for(let o=0;o<3;o++)Y()},I=(o,i)=>{if(o.x<-50||o.x>u.width+50){n.splice(i,1);return}W.value={x:Math.round(o.x),y:Math.round(o.y)};let t=Math.min(o.y,w.value-(n[i].animationType==="float"?30:0));return t=t>30?t:30,n[i].originalX=n[i].x=o.x,n[i].originalY=n[i].y=t,{x:o.x,y:t}},U=o=>{var r;if(o>=n.length)return;n[o].isHovered=!0;const i=(r=C.value[o])==null?void 0:r.getNode();if(!i)return;const t=i.getStage();t!=null&&t.content&&(t.content.style.cursor="pointer")},z=o=>{var r;if(o>=n.length)return;n[o].isHovered=!1;const i=(r=C.value[o])==null?void 0:r.getNode();if(!i)return;const t=i.getStage();t!=null&&t.content&&(t.content.style.cursor="default")},J=()=>{b.value||(n.forEach(o=>{o.originalX=o.x,o.originalY=o.y}),b.value=!0,X())},X=()=>{if(!b.value)return;const o=Date.now(),i=200-F.value*15;n.forEach((t,r)=>{const s=o/(i*(.8+Math.random()*.4)),L=t.originalX,R=t.originalY;switch(t.animationType){case"walk":t.legAngle.left=Math.sin(s)*20,t.legAngle.right=-t.legAngle.left,t.legScale.left=1+Math.sin(s)*.2,t.legScale.right=1-Math.sin(s)*.2,t.x=L+Math.cos(s)*.5;break;case"run":t.legAngle.left=Math.sin(s*2)*30,t.legAngle.right=-t.legAngle.left,t.legScale.left=1.2+Math.sin(s*2)*.3,t.legScale.right=1.2-Math.sin(s*2)*.3,t.x=L+Math.cos(s*2)*1.5;break;case"bounce":const y=Math.abs(Math.sin(s));t.legScale.left=.8+y*.4,t.legScale.right=.8+y*.4,t.y=R-y*30;break;case"dance":t.legAngle.left=Math.sin(s)*45,t.legAngle.right=Math.cos(s)*45,t.legScale.left=1+Math.sin(s*1.5)*.3,t.legScale.right=1+Math.cos(s*1.5)*.3,t.rotation=Math.sin(s/2)*10;break;case"float":t.y=R-50+Math.sin(s/2)*30,t.rotation=Math.sin(s/3)*5,t.legScale.left=1+Math.sin(s)*.1,t.legScale.right=1+Math.cos(s)*.1;break}t.x<50&&(t.x=50),t.x>u.width-50&&(t.x=u.width-50),t.y<50&&(t.y=50),t.y>u.height-50&&(t.y=u.height-50)}),x.value=requestAnimationFrame(X)},D=()=>{b.value&&(b.value=!1,x.value&&(cancelAnimationFrame(x.value),x.value=null),n.forEach(o=>{o.legScale.left=1,o.legScale.right=1,o.legAngle.left=0,o.legAngle.right=0,o.rotation=0}))};return oe(()=>{var i;const o=(i=A.value)==null?void 0:i.getStage();o&&o.on("mousemove",t=>{const r=o.getPointerPosition();r&&(W.value={x:Math.round(r.x),y:Math.round(r.y)})});for(let t=0;t<3;t++)Y()}),le(()=>{D()}),(o,i)=>{const t=d("v-rect"),r=d("v-line"),s=d("v-circle"),L=d("v-RegularPolygon"),R=d("v-ellipse"),y=d("v-arrow"),G=d("v-arc"),K=d("v-tag"),O=d("v-text"),Q=d("v-label"),Z=d("v-group"),j=d("v-layer"),m=d("v-stage"),S=d("el-button"),P=d("el-button-group"),ee=d("el-slider");return g(),c("div",he,[h("div",ae,[h("div",fe,[h("div",ue,[i[2]||(i[2]=h("div",{class:"bg-gray"},"探索排列组合",-1)),h("div",ye,[l(de,{enableDrawing:N.value,"onUpdate:enableDrawing":i[0]||(i[0]=e=>N.value=e),stageRef:A.value,drawingLayerRef:V.value},null,8,["enableDrawing","stageRef","drawingLayerRef"])])]),h("div",pe,[l(m,{ref_key:"stageRef",ref:A,config:u},{default:p(()=>[l(j,{ref:"layer"},{default:p(()=>[l(t,{config:{x:0,y:0,width:u.width,height:u.height,fill:"#f5f7fa"}},null,8,["config"]),l(ne,{text:"坐标: ( "+W.value.x+", "+W.value.y+" )",x:2,y:10,fontSize:16,"bg-color":"#333333bb","text-color":"white","corner-radius":8},null,8,["text"]),l(r,{config:{points:[0,w.value+80,u.width,w.value+80],stroke:"#909399",strokeWidth:2,dash:[10,5]}},null,8,["config"]),(g(!0),c(a,null,ie(n,(e,M)=>(g(),f(Z,{key:e.id,ref_for:!0,ref:v=>{v&&(C.value[M]=v)},config:{x:e.x,y:e.y,draggable:!0,dragBoundFunc:v=>I(v,M),rotation:e.rotation},onMouseenter:v=>U(M),onMouseleave:v=>z(M)},{default:p(()=>[e.isHovered?(g(),c(a,{key:0},[e.headType==="circle"?(g(),f(s,{key:0,config:{x:0,y:-e.headRadius,radius:e.headRadius+5,fill:"rgba(255, 255, 0, 1)",stroke:"#FFD700",strokeWidth:2,dash:[5,5],listening:!1}},null,8,["config"])):e.headType==="square"?(g(),f(t,{key:1,config:{x:-e.headRadius-4,y:-e.headRadius*2-4,width:e.headRadius*2+8,height:e.headRadius*2+8,fill:"rgba(255, 255, 0, 1)",stroke:"#FFD700",strokeWidth:2,cornerRadius:5,dash:[5,5],listening:!1}},null,8,["config"])):e.headType==="triangle"?(g(),f(L,{key:2,config:{x:0,y:-e.headRadius,sides:3,radius:e.headRadius*2+9,fill:"rgba(255, 255, 0, 1)",stroke:"#FFD700",strokeWidth:2,cornerRadius:5,dash:[5,5],listening:!1}},null,8,["config"])):e.headType==="ellipse"?(g(),f(R,{key:3,config:{x:0,y:-e.headRadius,radiusX:e.headRadius*1.5+5,radiusY:e.headRadius*.8+5,fill:"rgba(255, 255, 0, 1)",stroke:"#FFD700",strokeWidth:2,cornerRadius:5,dash:[5,5],listening:!1}},null,8,["config"])):_("",!0)],64)):_("",!0),e.headType==="circle"?(g(),f(s,{key:1,config:{x:0,y:-e.headRadius,radius:e.headRadius,fill:e.headColor,stroke:e.color,strokeWidth:2}},null,8,["config"])):e.headType==="square"?(g(),f(t,{key:2,config:{x:-e.headRadius,y:-e.headRadius*2,width:e.headRadius*2,height:e.headRadius*2,fill:e.headColor,stroke:e.color,strokeWidth:2,cornerRadius:5}},null,8,["config"])):e.headType==="triangle"?(g(),f(L,{key:3,config:{x:0,y:-e.headRadius,sides:3,radius:e.headRadius*2,fill:e.headColor,stroke:e.color,strokeWidth:2,cornerRadius:5}},null,8,["config"])):e.headType==="ellipse"?(g(),f(R,{key:4,config:{x:0,y:-e.headRadius,radiusX:e.headRadius*1.5,radiusY:e.headRadius*.8,fill:e.headColor,stroke:e.color,strokeWidth:2,cornerRadius:5}},null,8,["config"])):_("",!0),l(r,{config:{points:[0,0,0,e.bodyLength],stroke:e.color,strokeWidth:e.bodyWidth}},null,8,["config"]),e.armType==="straight"?(g(),f(r,{key:5,config:{points:[-e.armLength,e.armY,e.armLength,e.armY],stroke:e.color,strokeWidth:e.armWidth}},null,8,["config"])):e.armType==="bent"?(g(),c(a,{key:6},[l(r,{config:{points:[-e.armLength/2,e.armY-10,-e.armLength,e.armY],stroke:e.color,strokeWidth:e.armWidth}},null,8,["config"]),l(r,{config:{points:[e.armLength/2,e.armY-10,e.armLength,e.armY],stroke:e.color,strokeWidth:e.armWidth}},null,8,["config"])],64)):e.armType==="wave"?(g(),c(a,{key:7},[l(r,{config:{points:[-e.armLength/3,e.armY-5,-e.armLength*2/3,e.armY+5,-e.armLength,e.armY],stroke:e.color,strokeWidth:e.armWidth,tension:.5}},null,8,["config"]),l(r,{config:{points:[e.armLength/3,e.armY-5,e.armLength*2/3,e.armY+5,e.armLength,e.armY],stroke:e.color,strokeWidth:e.armWidth,tension:.5}},null,8,["config"])],64)):_("",!0),e.legType==="line"?(g(),c(a,{key:8},[l(r,{config:{points:[0,e.bodyLength,-e.legLength*e.legScale.left,e.bodyLength+e.legLength],stroke:e.color,strokeWidth:e.legWidth}},null,8,["config"]),l(r,{config:{points:[0,e.bodyLength,e.legLength*e.legScale.right,e.bodyLength+e.legLength],stroke:e.color,strokeWidth:e.legWidth}},null,8,["config"])],64)):e.legType==="arrow"?(g(),c(a,{key:9},[l(y,{config:{points:[0,e.bodyLength,-e.legLength*e.legScale.left,e.bodyLength+e.legLength],pointerLength:10,pointerWidth:8,fill:e.color,stroke:e.color,strokeWidth:e.legWidth}},null,8,["config"]),l(y,{config:{points:[0,e.bodyLength,e.legLength*e.legScale.right,e.bodyLength+e.legLength],pointerLength:10,pointerWidth:8,fill:e.color,stroke:e.color,strokeWidth:e.legWidth}},null,8,["config"])],64)):e.legType==="double-arrow"?(g(),c(a,{key:10},[l(y,{config:{points:[0,e.bodyLength,-e.legLength*e.legScale.left,e.bodyLength+e.legLength],pointerLength:10,pointerWidth:8,fill:e.color,stroke:e.color,strokeWidth:e.legWidth,pointerAtBeginning:!0,pointerAtEnding:!0}},null,8,["config"]),l(y,{config:{points:[0,e.bodyLength,e.legLength*e.legScale.right,e.bodyLength+e.legLength],pointerLength:10,pointerWidth:8,fill:e.color,stroke:e.color,strokeWidth:e.legWidth,pointerAtBeginning:!0,pointerAtEnding:!0}},null,8,["config"])],64)):e.legType==="lightning"?(g(),c(a,{key:11},[l(r,{config:{points:[0,e.bodyLength,-e.legLength/2*e.legScale.left,e.bodyLength+e.legLength/2,-e.legLength*e.legScale.left,e.bodyLength+e.legLength],stroke:e.color,strokeWidth:e.legWidth,lineJoin:"bevel"}},null,8,["config"]),l(r,{config:{points:[0,e.bodyLength,e.legLength/2*e.legScale.right,e.bodyLength+e.legLength/2,e.legLength*e.legScale.right,e.bodyLength+e.legLength],stroke:e.color,strokeWidth:e.legWidth,lineJoin:"bevel"}},null,8,["config"]),l(y,{config:{points:[-e.legLength*e.legScale.left,e.bodyLength+e.legLength,-e.legLength*e.legScale.left-10,e.bodyLength+e.legLength+10],pointerLength:8,pointerWidth:6,fill:e.color,stroke:e.color,strokeWidth:2}},null,8,["config"]),l(y,{config:{points:[e.legLength*e.legScale.right,e.bodyLength+e.legLength,e.legLength*e.legScale.right+10,e.bodyLength+e.legLength+10],pointerLength:8,pointerWidth:6,fill:e.color,stroke:e.color,strokeWidth:2}},null,8,["config"])],64)):_("",!0),e.faceType==="normal"?(g(),c(a,{key:12},[l(s,{config:{x:-8,y:-e.headRadius-5,radius:3,fill:"#333"}},null,8,["config"]),l(s,{config:{x:8,y:-e.headRadius-5,radius:3,fill:"#333"}},null,8,["config"]),l(r,{config:{points:[-8,-e.headRadius+5,8,-e.headRadius+5],stroke:"#333",strokeWidth:2,lineCap:"round"}},null,8,["config"])],64)):e.faceType==="happy"?(g(),c(a,{key:13},[l(s,{config:{x:-8,y:-e.headRadius-5,radius:3,fill:"#333"}},null,8,["config"]),l(s,{config:{x:8,y:-e.headRadius-5,radius:3,fill:"#333"}},null,8,["config"]),l(G,{config:{x:0,y:-e.headRadius+5,innerRadius:0,outerRadius:8,angle:180,rotation:0,fill:"transparent",stroke:"#333",strokeWidth:2}},null,8,["config"])],64)):e.faceType==="angry"?(g(),c(a,{key:14},[l(r,{config:{points:[-12,-e.headRadius-8,-4,-e.headRadius-2],stroke:"#333",strokeWidth:2}},null,8,["config"]),l(r,{config:{points:[12,-e.headRadius-8,4,-e.headRadius-2],stroke:"#333",strokeWidth:2}},null,8,["config"]),l(r,{config:{points:[-8,-e.headRadius+5,0,-e.headRadius+2,8,-e.headRadius+5],stroke:"#333",strokeWidth:2,tension:.5}},null,8,["config"])],64)):_("",!0),e.accessory==="hat"?(g(),f(t,{key:15,config:{x:-e.headRadius-5,y:-e.headRadius*2-10,width:e.headRadius*2+10,height:10,fill:e.color,stroke:"#333",strokeWidth:1,cornerRadius:3}},null,8,["config"])):e.accessory==="glasses"?(g(),c(a,{key:16},[l(t,{config:{x:-15,y:-e.headRadius-8,width:10,height:5,fill:"rgba(200, 200, 255, 0.5)",stroke:"#333",strokeWidth:1}},null,8,["config"]),l(t,{config:{x:5,y:-e.headRadius-8,width:10,height:5,fill:"rgba(200, 200, 255, 0.5)",stroke:"#333",strokeWidth:1}},null,8,["config"]),l(r,{config:{points:[-5,-e.headRadius-5,5,-e.headRadius-5],stroke:"#333",strokeWidth:1}},null,8,["config"])],64)):_("",!0),l(Q,{config:{x:e.headRadius,y:e.bodyLength/2,opacity:.75}},{default:p(()=>[l(K,{config:{fill:e.color,cornerRadius:10}},null,8,["config"]),l(O,{config:{text:`小${M+1}`,fontFamily:"Calibri",fontSize:14,padding:5,fill:"black"}},null,8,["config"])]),_:2},1032,["config"])]),_:2},1032,["config","onMouseenter","onMouseleave"]))),128))]),_:1},512),l(j,{ref_key:"drawingLayerRef",ref:V},null,512)]),_:1},8,["config"])])]),h("div",ke,[h("div",_e,[h("div",ve,[l(P,null,{default:p(()=>[l(S,{type:"success",onClick:Y},{default:p(()=>i[3]||(i[3]=[T("添加")])),_:1,__:[3]}),l(S,{type:"primary",onClick:$},{default:p(()=>i[4]||(i[4]=[T("重置")])),_:1,__:[4]})]),_:1}),h("div",be,"（"+re(n==null?void 0:n.length)+" 人）",1)]),h("div",Le,[h("div",Re,[l(P,null,{default:p(()=>[l(S,{type:"primary",onClick:J},{default:p(()=>i[5]||(i[5]=[T("开始")])),_:1,__:[5]}),l(S,{onClick:D},{default:p(()=>i[6]||(i[6]=[T("停止")])),_:1,__:[6]})]),_:1}),i[7]||(i[7]=h("div",{class:"font-bold"},"动画速度",-1))]),l(ee,{modelValue:F.value,"onUpdate:modelValue":i[1]||(i[1]=e=>F.value=e),min:1,max:10,label:"速度"},null,8,["modelValue"])])])])])])}}}),Ae=ge(Me,[["__scopeId","data-v-86d37a6f"]]);export{Ae as default};
