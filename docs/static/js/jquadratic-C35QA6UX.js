import{d as fe,r as x,k as b,o as de,w as ce,f as D,g as m,h as c,A as a,z as d,C as g,m as h,bE as E,bB as L,bC as N,a as q,B as z,cv as ve,_ as xe}from"./index-BxizvH50.js";import{D as me}from"./dutils-CTazb8Sy.js";import{_ as W}from"./KTextWithBg.vue_vue_type_script_setup_true_lang-DRvk-GSO.js";import pe from"./DrawingTool-CBQ9ZVZa.js";import{s as X}from"./index-Bux1j4dc.js";import{f as be}from"./myUtils-VYNnaZYo.js";const ge=j=>{const V=j.replace(/\s/g,"").replace(/\+-/g,"-").replace(/--/g,"+"),S=/([+-]?\d*)x²|x²/g,u=/([+-]?\d*)x(?!²)/g,C=/([+-]?\d+)(?![x²])/g;let o=0,s=0,i=0;const p=S.exec(V);p&&(p[1]===""||p[1]==="+"?o=1:p[1]==="-"?o=-1:o=parseFloat(p[1]));const y=u.exec(V);y&&(y[1]===""||y[1]==="+"?s=1:y[1]==="-"?s=-1:s=parseFloat(y[1]));const M=C.exec(V);M&&(i=parseFloat(M[1]));let r="";return o!==0&&(o===1?r+="x²":o===-1?r+="-x²":r+=`${o}x²`),s!==0&&(s>0&&r!==""&&(r+="+"),s===1?r+="x":s===-1?r+="-x":r+=`${s}x`),i!==0&&(i>0&&r!==""&&(r+="+"),r+=i),r===""&&(r="0"),{isQuadratic:o!==0,coefficients:{a:o,b:s,c:i},standardForm:r,functionString:`f(x) = ${r}`}},ye={class:"flex flex-col md:flex-row gap-6 p-4 bg-gray-50 shadow mkonva"},_e={class:"flex-1"},we={class:"border rounded-lg overflow-hidden bg-white"},he={class:"p-2 flex justify-between items-center border-left-blue"},Ve={class:"flex gap-2"},$e={class:"relative"},ke={class:"w-full md:w-120 space-y-2"},Se={class:"bg-white p-4 rounded-lg shadow border-left-blue"},Me={class:"bg-white p-4 rounded-lg shadow border-left-blue"},ze={class:"bg-white p-4 rounded-lg shadow border-left-blue"},Ce={class:"space-y-2"},v=40,Fe="$$x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}$$",Re="$$({-b \\over 2a}， {{4ac - b^2} \\over 4a})$$",Ue="$${-b \\over 2a}$$",De=fe({name:"JQuadratic",__name:"jquadratic",setup(j){let V=940,S=680,u={x:V/2,y:S/2};const C=x({lines:[],labels:[]}),o=x(1),s=x(2),i=x(-2),p=x("x² + 2x - 2"),y=x(!0),M=x(!0),r=x(!0),H=x(!0),A=x(!0),I=x(!0),Q=x(!1),G=x({x:0,y:0}),P=x(null),K=x(null),ae=b(()=>{let t="";const{value:e}=o,{value:n}=s,{value:f}=i;if(e===0){if(n===0)return`y = ${f}`;if(Math.abs(n)===1?t+=n>0?"x":"-x":t+=`${n}x`,f!==0){const w=f>0?" + ":" - ";t+=`${w}${Math.abs(f)}`}return t}if(Math.abs(e)===1?t+=e>0?"x²":"-x²":t+=`${e}x²`,n!==0){const w=n>0?" + ":" - ";Math.abs(n)===1?t+=`${w}x`:t+=`${w}${Math.abs(n)}x`}if(f!==0){const w=f>0?" + ":" - ";t+=`${w}${Math.abs(f)}`}return t}),oe=b(()=>s.value*s.value-4*o.value*i.value),$=b(()=>{const t=oe.value;if(t<0)return[];if(o.value===0)return s.value===0?[]:[-i.value/s.value];const e=Math.sqrt(t),n=(-s.value-e)/(2*o.value),f=(-s.value+e)/(2*o.value);return t===0?[n]:[n,f]}),B=b(()=>{if(o.value===0)return null;const t=-s.value/(2*o.value),e=o.value*t*t+s.value*t+i.value;return{x:t,y:e}}),O=b(()=>o.value===0?null:-s.value/(2*o.value)),Y=b(()=>{if(!r.value||o.value===0)return null;const t=[];for(let e=-u.x/v;e<=u.x/v;e+=.1){const n=e,f=o.value*n*n+s.value*n+i.value;f>=-u.y/v&&f<=u.y/v&&(t.push(u.x+n*v),t.push(u.y-f*v))}return{points:t,stroke:"#3a7bd5",strokeWidth:3,tension:.2}}),J=b(()=>{if(!M.value||!r.value||O.value===null)return null;const t=u.x+O.value*v;return{points:[t,0,t,S],stroke:"#ff6b6b",strokeWidth:2,dash:[5,5]}}),F=b(()=>{if(!y.value||!r.value||B.value===null)return null;const{x:t,y:e}=B.value;return{x:u.x+t*v,y:u.y-e*v,text:`顶点: (${t.toFixed(2)}, ${e.toFixed(2)})`,fontSize:16,fill:"#ff6b6b"}}),R=b(()=>!I.value||!r.value?null:{x:u.x+10,y:u.y-i.value*v-10,text:`y截距: ${i.value.toFixed(2)}`,fontSize:16,fill:"#4ecdc4"}),ne=b(()=>{if(!r.value)return[];const t=[];if(I.value&&t.push({x:u.x,y:u.y-i.value*v,radius:6,fill:"#4ecdc4",stroke:"#fff",strokeWidth:2}),A.value&&$.value.forEach(e=>{t.push({x:u.x+e*v,y:u.y,radius:6,fill:"#ffa502",stroke:"#fff",strokeWidth:2})}),y.value&&B.value){const{x:e,y:n}=B.value;t.push({x:u.x+e*v,y:u.y-n*v,radius:6,fill:"#ff6b6b",stroke:"#fff",strokeWidth:2})}return t}),se=b(()=>{if(!A.value||!r.value||$.value.length===0)return[];let t=[0,0];if($.value.length==2){let e=$.value[0].toFixed(5),n=$.value[1].toFixed(5);t=e>n?[0,-70]:[-70,0]}return $.value.map((e,n)=>({x:u.x+e*v+t[n],y:u.y+20,text:`${e.toFixed(2)}`,fontSize:16,fill:"#EE2A2AD1"}))}),Z=()=>{let t=be(p.value);t!=p.value&&(p.value=t);let e=ge(t);o.value=e.coefficients.a,s.value=e.coefficients.b,i.value=e.coefficients.c},ee=()=>{o.value=1,s.value=2,i.value=-2};return de(()=>{var e;C.value=me.drawGrid(V,S,u,v);const t=(e=P.value)==null?void 0:e.getStage();t&&t.on("mousemove",n=>{const f=t.getPointerPosition();f&&(G.value={x:Math.round(f.x),y:Math.round(f.y)})})}),ce([o,s,i],()=>{p.value=ae.value}),(t,e)=>{const n=g("v-line"),f=g("v-text"),w=g("v-circle"),te=g("v-layer"),ue=g("v-stage"),T=g("el-slider"),_=g("el-form-item"),re=g("el-button"),le=g("el-form"),ie=g("el-input"),U=g("el-checkbox");return m(),D("div",ye,[c("div",_e,[c("div",we,[c("div",null,[c("div",he,[e[10]||(e[10]=c("div",{class:"text-sm font-medium text-gray-700 bg-gray"}," 探索二次函数 y = ax² + bx + c 的图像变化规律 ",-1)),c("div",Ve,[a(pe,{enableDrawing:Q.value,"onUpdate:enableDrawing":e[0]||(e[0]=l=>Q.value=l),stageRef:P.value,drawingLayerRef:K.value},null,8,["enableDrawing","stageRef","drawingLayerRef"])])]),c("div",$e,[a(ue,{ref_key:"stageRef",ref:P,config:{width:q(V),height:q(S)}},{default:d(()=>[a(te,null,{default:d(()=>[(m(!0),D(L,null,N(C.value.lines,(l,k)=>(m(),h(n,{key:"grid-"+k,config:l},null,8,["config"]))),128)),(m(!0),D(L,null,N(C.value.labels,(l,k)=>(m(),h(f,{key:"axe-label-"+k,config:l},null,8,["config"]))),128)),Y.value?(m(),h(n,{key:0,config:Y.value},null,8,["config"])):E("",!0),J.value?(m(),h(n,{key:1,config:J.value},null,8,["config"])):E("",!0),F.value?(m(),h(W,{key:2,text:F.value.text,x:F.value.x+10,y:F.value.y-10,fontSize:F.value.fontSize,"bg-color":"#ff6b6b88","text-color":"white","corner-radius":8},null,8,["text","x","y","fontSize"])):E("",!0),R.value?(m(),h(W,{key:3,text:R.value.text,x:R.value.x,y:R.value.y,fontSize:R.value.fontSize,"bg-color":"#10b98188","text-color":"white","corner-radius":8},null,8,["text","x","y","fontSize"])):E("",!0),(m(!0),D(L,null,N(se.value,(l,k)=>(m(),h(W,{key:"x-intercept-"+k,text:l.text,x:l.x+10,y:l.y,fontSize:l.fontSize,"bg-color":"#ffa50288","text-color":"white","corner-radius":8},null,8,["text","x","y","fontSize"]))),128)),(m(!0),D(L,null,N(ne.value,(l,k)=>(m(),h(w,{key:"point-"+k,config:l},null,8,["config"]))),128)),a(W,{text:"坐标: ( "+G.value.x+", "+G.value.y+" )",x:2,y:10,fontSize:16,"bg-color":"#333333bb","text-color":"white","corner-radius":8},null,8,["text"])]),_:1}),a(te,{ref_key:"drawingLayerRef",ref:K},null,512)]),_:1},8,["config"])])])])]),c("div",ke,[c("div",Se,[e[12]||(e[12]=c("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"参数控制",-1)),a(le,null,{default:d(()=>[a(_,{label:"a",class:""},{default:d(()=>[a(T,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value=l),min:-5,max:5,step:.1,"show-input":""},null,8,["modelValue"])]),_:1}),a(_,{label:"b",class:""},{default:d(()=>[a(T,{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value=l),min:-10,max:10,step:.1,"show-input":""},null,8,["modelValue"])]),_:1}),a(_,{label:"c",class:""},{default:d(()=>[a(T,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=l=>i.value=l),min:-10,max:10,step:.1,"show-input":""},null,8,["modelValue"])]),_:1}),a(_,{label:"",class:""},{default:d(()=>[a(re,{type:"info",class:"w-full",onClick:ee},{default:d(()=>e[11]||(e[11]=[z(" 重置 ")])),_:1,__:[11]})]),_:1})]),_:1})]),c("div",Me,[e[14]||(e[14]=c("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"方程信息:",-1)),a(le,{class:"right-forms","label-position":"right","label-width":"100"},{default:d(()=>[a(_,{label:"y = ",class:"",style:{"margin-bottom":"10px !important"}},{default:d(()=>[a(ie,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=l=>p.value=l),style:{"font-size":"21px"},onBlur:Z,onClear:ee,onKeyup:ve(Z,["enter"])},null,8,["modelValue"])]),_:1}),a(_,{label:"判别式:",class:""},{default:d(()=>e[13]||(e[13]=[c("div",{class:"text-lg font-mono"}," △ = b² - 4ac",-1)])),_:1,__:[13]}),a(_,{label:"求根公式:",class:""},{default:d(()=>[a(q(X),{formula:Fe})]),_:1}),a(_,{label:"中心对称轴:",class:""},{default:d(()=>[a(q(X),{formula:Ue})]),_:1}),a(_,{label:"顶点坐标:",class:""},{default:d(()=>[a(q(X),{formula:Re})]),_:1})]),_:1})]),c("div",ze,[e[20]||(e[20]=c("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"显示选项",-1)),c("div",Ce,[a(U,{modelValue:H.value,"onUpdate:modelValue":e[5]||(e[5]=l=>H.value=l)},{default:d(()=>e[15]||(e[15]=[z("网格")])),_:1,__:[15]},8,["modelValue"]),a(U,{modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=l=>y.value=l)},{default:d(()=>e[16]||(e[16]=[z("顶点")])),_:1,__:[16]},8,["modelValue"]),a(U,{modelValue:M.value,"onUpdate:modelValue":e[7]||(e[7]=l=>M.value=l)},{default:d(()=>e[17]||(e[17]=[z("对称轴")])),_:1,__:[17]},8,["modelValue"]),a(U,{modelValue:I.value,"onUpdate:modelValue":e[8]||(e[8]=l=>I.value=l)},{default:d(()=>e[18]||(e[18]=[z("y截距")])),_:1,__:[18]},8,["modelValue"]),a(U,{modelValue:A.value,"onUpdate:modelValue":e[9]||(e[9]=l=>A.value=l),disabled:$.value.length===0},{default:d(()=>e[19]||(e[19]=[z(" x截距 ")])),_:1,__:[19]},8,["modelValue","disabled"])])])])])}}}),Ne=xe(De,[["__scopeId","data-v-523fcb5f"]]);export{Ne as default};
