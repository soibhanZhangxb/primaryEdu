import{d as de,r as t,k as A,w as pe,o as ge,f as V,g as _,A as o,h,z as n,C as s,B as y,bE as U,bF as N,t as _e,m as X,bB as O,bC as Q,_ as me}from"./index-BxizvH50.js";const Ce={class:"pulley-system-demo"},xe={class:"physics-info"},ye={key:1},he={class:"canvas-container"},Fe=de({__name:"jpulley",setup(ke){const p=t("single"),m=t(!0),C=t(10),B=t(5),g=t(!1),F=t(null),a=t(400),x=t(0),M=t(0),k=t(0),Z=t({width:800,height:600}),ee=t({x:100,y:50,width:600,height:20,fill:"#8B4513",stroke:"#654321",strokeWidth:2}),c=t([]),f=t([]),b=t({x:400,y:a,width:60,height:80}),oe=t({width:60,height:80,fill:"#4682B4",stroke:"#2F4F4F",strokeWidth:2,cornerRadius:5}),Y=t({text:"10N",x:30,y:40,fontSize:16,fill:"white",align:"center"}),D=t({x:700,y:150,draggable:!1}),le=t({x:0,y:0,radius:15,fill:"#FFD700",stroke:"#DAA520",strokeWidth:2}),te=t({points:[0,0,0,60],stroke:"#FFD700",strokeWidth:8,lineCap:"round",lineJoin:"round"}),P=t(!1),$=t({points:[0,0,0,0],stroke:"red",strokeWidth:2,dash:[5,5]}),w=t({x:0,y:0,text:"",fontSize:14,fill:"red"}),S=A(()=>{if(m.value)return 1;switch(p.value){case"single":return 2;case"double":return 3;case"triple":return 4;default:return 1}}),ne=A(()=>C.value/S.value),v=A(()=>B.value*S.value-C.value),ue=A(()=>g.value?Math.abs(v.value)<.1?"平衡状态":v.value>0?"物体上升中":"拉力不足":"未开始"),ae=A(()=>g.value?Math.abs(v.value)<.1?"green":v.value>0?"blue":"red":"black"),T=(l,e,u)=>({groupConfig:{x:l,y:e,offsetX:20,offsetY:20,draggable:!1},wheelConfig:{x:0,y:0,radius:20,fill:"#D3D3D3",stroke:"#A9A9A9",strokeWidth:2},axleConfig:{x:0,y:0,radius:3,fill:"#696969"},bracketConfig:{points:[0,0,0,u?-30:30],stroke:"#A9A9A9",strokeWidth:5,lineCap:"round"}}),I=()=>{c.value=[],f.value=[];const l=400,e=100,u=m.value?e:a.value-40;c.value.push(T(l,u,m.value)),(p.value==="double"||p.value==="triple")&&(c.value.push(T(l-120,e,!0)),p.value==="triple"&&c.value.push(T(l+120,e,!0))),q()},q=()=>{f.value=[];const l=c.value[0],e=b.value.x,u=a.value;if(f.value.push({points:[D.value.x,D.value.y+15,l.groupConfig.x-20,l.groupConfig.y],stroke:"#F5F5F5",strokeWidth:3,lineCap:"round"}),p.value==="double"){const r=c.value[1];f.value.push({points:[l.groupConfig.x+20,l.groupConfig.y,r.groupConfig.x-20,r.groupConfig.y],stroke:"#F5F5F5",strokeWidth:3,lineCap:"round"}),f.value.push({points:[r.groupConfig.x+20,r.groupConfig.y,e,u],stroke:"#F5F5F5",strokeWidth:3,lineCap:"round"})}else if(p.value==="triple"){const r=c.value[1],d=c.value[2];f.value.push({points:[l.groupConfig.x-20,l.groupConfig.y,r.groupConfig.x+20,r.groupConfig.y],stroke:"#F5F5F5",strokeWidth:3,lineCap:"round"}),f.value.push({points:[l.groupConfig.x+20,l.groupConfig.y,d.groupConfig.x-20,d.groupConfig.y],stroke:"#F5F5F5",strokeWidth:3,lineCap:"round"}),f.value.push({points:[r.groupConfig.x-20,r.groupConfig.y,e-30,u],stroke:"#F5F5F5",strokeWidth:3,lineCap:"round"}),f.value.push({points:[d.groupConfig.x+20,d.groupConfig.y,e+30,u],stroke:"#F5F5F5",strokeWidth:3,lineCap:"round"})}else f.value.push({points:[l.groupConfig.x+20,l.groupConfig.y,e,u],stroke:"#F5F5F5",strokeWidth:3,lineCap:"round"})},ie=()=>{const l=Math.min(Math.abs(v.value)*5,150);$.value.points=[b.value.x,a.value+80,b.value.x,a.value+80+l*(v.value>0?-1:1)],w.value.text=`${Math.abs(v.value).toFixed(2)}N ${v.value>0?"↑":"↓"}`,w.value.x=b.value.x+5,w.value.y=a.value+80+l*(v.value>0?-1:1)+(v.value>0?-20:5)},E=l=>{k.value||(k.value=l);const e=(l-k.value)/1e3;k.value=l,M.value=v.value/C.value*9.8*10,x.value+=M.value*e;const u=100;Math.abs(x.value)>u&&(x.value=u*Math.sign(x.value)),a.value+=x.value*e,a.value<200&&(a.value=200),a.value>500&&(a.value=500),m.value||(c.value[0].groupConfig.y=a.value-40),q(),ie(),Y.value.text=`${C.value}N`,g.value&&(F.value=requestAnimationFrame(E))},se=()=>{g.value||(g.value=!0,P.value=!0,x.value=0,k.value=0,F.value=requestAnimationFrame(E))},G=()=>{g.value=!1,P.value=!1,F.value&&(cancelAnimationFrame(F.value),F.value=null),a.value=400,x.value=0,M.value=0,I()};return pe([p,m,C],()=>{G(),I()}),ge(()=>{I()}),(l,e)=>{const u=s("el-radio-button"),r=s("el-radio-group"),d=s("el-form-item"),J=s("el-slider"),L=s("el-button"),re=s("el-form"),fe=s("el-card"),H=s("v-rect"),z=s("v-circle"),W=s("v-line"),j=s("v-group"),K=s("v-text"),ve=s("v-layer"),ce=s("v-stage");return _(),V("div",Ce,[o(fe,{class:"control-panel"},{header:n(()=>e[4]||(e[4]=[h("div",{class:"card-header"},[h("span",null,"滑轮组控制系统")],-1)])),default:n(()=>[o(re,{"label-width":"100px"},{default:n(()=>[o(d,{label:"滑轮组类型"},{default:n(()=>[o(r,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=i=>p.value=i)},{default:n(()=>[o(u,{value:"single"},{default:n(()=>e[5]||(e[5]=[y("单滑轮")])),_:1,__:[5]}),o(u,{value:"double"},{default:n(()=>e[6]||(e[6]=[y("双滑轮")])),_:1,__:[6]}),o(u,{value:"triple"},{default:n(()=>e[7]||(e[7]=[y("三滑轮")])),_:1,__:[7]})]),_:1},8,["modelValue"])]),_:1}),o(d,{label:"滑轮类型"},{default:n(()=>[o(r,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=i=>m.value=i)},{default:n(()=>[o(u,{value:!0},{default:n(()=>e[8]||(e[8]=[y("定滑轮")])),_:1,__:[8]}),o(u,{value:!1},{default:n(()=>e[9]||(e[9]=[y("动滑轮")])),_:1,__:[9]})]),_:1},8,["modelValue"])]),_:1}),o(d,{label:"物体重量(N)"},{default:n(()=>[o(J,{modelValue:C.value,"onUpdate:modelValue":e[2]||(e[2]=i=>C.value=i),min:1,max:20,step:.5,"show-input":""},null,8,["modelValue"])]),_:1}),o(d,{label:"施加拉力(N)"},{default:n(()=>[o(J,{modelValue:B.value,"onUpdate:modelValue":e[3]||(e[3]=i=>B.value=i),min:.5,max:20,step:.1,"show-input":""},null,8,["modelValue"])]),_:1}),o(d,null,{default:n(()=>[o(L,{type:"primary",onClick:se},{default:n(()=>e[10]||(e[10]=[y("开始演示")])),_:1,__:[10]}),o(L,{onClick:G},{default:n(()=>e[11]||(e[11]=[y("重置")])),_:1,__:[11]})]),_:1})]),_:1}),h("div",xe,[h("p",null,"机械利益: "+N(S.value),1),h("p",null,"理论所需拉力: "+N(ne.value.toFixed(2))+" N",1),g.value?(_(),V("p",{key:0,style:_e({color:ae.value})}," 状态: "+N(ue.value),5)):U("",!0),g.value?(_(),V("p",ye,"物体位置: "+N(a.value.toFixed(1))+" px",1)):U("",!0)])]),_:1}),h("div",he,[o(ce,{ref:"stageRef",config:Z.value},{default:n(()=>[o(ve,{ref:"layerRef"},{default:n(()=>[o(H,{config:ee.value},null,8,["config"]),(_(!0),V(O,null,Q(c.value,(i,R)=>(_(),X(j,{key:"pulley-"+R,config:i.groupConfig},{default:n(()=>[o(z,{config:i.wheelConfig},null,8,["config"]),o(z,{config:i.axleConfig},null,8,["config"]),o(W,{config:i.bracketConfig},null,8,["config"])]),_:2},1032,["config"]))),128)),(_(!0),V(O,null,Q(f.value,(i,R)=>(_(),X(W,{key:"rope-"+R,config:i},null,8,["config"]))),128)),o(j,{config:b.value},{default:n(()=>[o(H,{config:oe.value},null,8,["config"]),o(K,{config:Y.value},null,8,["config"])]),_:1},8,["config"]),o(j,{config:D.value},{default:n(()=>[o(z,{config:le.value},null,8,["config"]),o(W,{config:te.value},null,8,["config"])]),_:1},8,["config"]),P.value?(_(),X(j,{key:0},{default:n(()=>[o(W,{config:$.value},null,8,["config"]),o(K,{config:w.value},null,8,["config"])]),_:1})):U("",!0)]),_:1},512)]),_:1},8,["config"])])])}}}),Ae=me(Fe,[["__scopeId","data-v-9b2e980a"]]);export{Ae as default};
