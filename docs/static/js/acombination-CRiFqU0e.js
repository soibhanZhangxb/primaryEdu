import{d as ce,y as pe,r as p,k as Y,w as _e,f as A,g as f,A as l,h,z as o,C as s,B as C,bF as c,a as Z,cy as me,cz as ge,bE as X,m as y,bB as ee,bC as le,cA as he,_ as ye}from"./index-4iHgqUda.js";import{m as q}from"./myUtils-CENrj8WP.js";const we={class:"combination-demo-container"},be={class:"content"},xe={class:"result-info font-bold"},Ce={key:0},ke={key:1},Ve={class:"canvas-container"},O="一 二 三 四",Be=ce({__name:"acombination",setup(Oe){const te=pe({width:600,height:400}),R=p(O),n=p(q(O)),i=p(2),F=p("permutation"),S=p(!1),I=p(800),k=p(!1),_=p([]),m=p(0),V=p([]),r=p(null),B=p(!1),$=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F06292","#7986CB","#9575CD","#64B5F6","#4DB6AC","#81C784","#FFD54F"],ae=Y(()=>n.value.length),W=Y(()=>_.value.length),D=a=>$[a%$.length],j=()=>{n.value=R.value.split(" ").map(a=>a.trim()).filter(a=>a.length>0),n.value.length===0&&(R.value=O,n.value=q(O)),i.value=Math.min(i.value,n.value.length)},oe=()=>{B.value||(_.value=[],F.value==="permutation"?S.value?H(n.value,i.value):G(n.value,i.value):S.value?K(n.value,i.value):J(n.value,i.value),_.value.length>0?(m.value=0,N(0)):he.warning("没有符合条件的排列组合"))},G=(a,e,u=[])=>{if(u.length===e){_.value.push([...u]);return}for(let t=0;t<a.length;t++)u.includes(a[t])||(u.push(a[t]),G(a,e,u),u.pop())},H=(a,e,u=[])=>{if(u.length===e){_.value.push([...u]);return}for(let t=0;t<a.length;t++)u.push(a[t]),H(a,e,u),u.pop()},J=(a,e,u=0,t=[])=>{if(t.length===e){_.value.push([...t]);return}for(let d=u;d<a.length;d++)t.push(a[d]),J(a,e,d+1,t),t.pop()},K=(a,e,u=0,t=[])=>{if(t.length===e){_.value.push([...t]);return}for(let d=u;d<a.length;d++)t.push(a[d]),K(a,e,d,t),t.pop()},N=a=>{if(a<0||a>=_.value.length)return;B.value=!0,V.value=[];const e=_.value[a],u=I.value,t=Date.now(),d=()=>{const E=Date.now()-t,b=Math.min(E/u,1);if(b<1)requestAnimationFrame(d);else{V.value=e,B.value=!1,r.value=null;return}const w=Math.floor(b*e.length);if(w<e.length){const U=e[w],z=n.value.indexOf(U),x=100+z*80,M=100+w*80;r.value={x:x+(M-x)*(b*e.length-w),y:100+200*(b*e.length-w),color:D(z),text:U},V.value=e.slice(0,w)}};d()},ne=()=>{m.value>0&&!B.value&&(m.value--,N(m.value))},ue=()=>{m.value<_.value.length-1&&!B.value&&(m.value++,N(m.value))},se=()=>{B.value||(R.value=O,n.value=q(O),i.value=2,F.value="permutation",S.value=!1,_.value=[],V.value=[],m.value=0)};return _e(n,()=>{i.value=Math.min(i.value,n.value.length)},{deep:!0}),j(),(a,e)=>{const u=s("el-switch"),t=s("el-form-item"),d=s("el-input"),E=s("el-slider"),b=s("el-radio-button"),w=s("el-radio-group"),U=s("el-form"),z=s("el-divider"),x=s("el-button"),M=s("el-icon"),ie=s("el-button-group"),ve=s("el-card"),P=s("v-circle"),T=s("v-rect"),L=s("v-text"),Q=s("v-group"),re=s("v-arrow"),de=s("v-layer"),fe=s("v-stage");return f(),A("div",we,[l(ve,{class:"control-panel"},{header:o(()=>e[6]||(e[6]=[h("div",{class:"card-header"},[h("span",null,"排列组合演示工具")],-1)])),default:o(()=>[h("div",be,[e[9]||(e[9]=h("div",{class:"font-bold"},"参数设置：",-1)),l(U,{"label-width":"100px"},{default:o(()=>[l(t,{label:"是否圆形"},{default:o(()=>[l(u,{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=v=>k.value=v),"active-text":"方型","inactive-text":"圆型"},null,8,["modelValue"])]),_:1}),l(t,{label:"元素集合"},{default:o(()=>[l(d,{modelValue:R.value,"onUpdate:modelValue":e[1]||(e[1]=v=>R.value=v),placeholder:"输入元素，空格分隔",onChange:j},null,8,["modelValue"])]),_:1}),l(t,{label:`选择(${i.value}个)`,class:"flex flex-between"},{default:o(()=>[l(E,{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=v=>i.value=v),min:1,max:ae.value,step:1},null,8,["modelValue","max"])]),_:1},8,["label"]),l(t,{label:"计算类型"},{default:o(()=>[l(w,{modelValue:F.value,"onUpdate:modelValue":e[3]||(e[3]=v=>F.value=v)},{default:o(()=>[l(b,{label:"permutation"},{default:o(()=>e[7]||(e[7]=[C("排列 (P)")])),_:1,__:[7]}),l(b,{label:"combination"},{default:o(()=>e[8]||(e[8]=[C("组合 (C)")])),_:1,__:[8]})]),_:1},8,["modelValue"])]),_:1}),l(t,{label:"是否重复"},{default:o(()=>[l(u,{modelValue:S.value,"onUpdate:modelValue":e[4]||(e[4]=v=>S.value=v),"active-text":"允许","inactive-text":"禁止"},null,8,["modelValue"])]),_:1}),l(t,{label:"动画速度"},{default:o(()=>[l(E,{modelValue:I.value,"onUpdate:modelValue":e[5]||(e[5]=v=>I.value=v),min:100,max:2e3,step:100},null,8,["modelValue"])]),_:1})]),_:1})]),l(z),l(x,{type:W.value>0?"success":"primary",onClick:oe},{default:o(()=>e[10]||(e[10]=[C("开始计算")])),_:1,__:[10]},8,["type"]),l(x,{onClick:se},{default:o(()=>e[11]||(e[11]=[C("重置计算")])),_:1,__:[11]}),h("div",xe,[h("p",null,"总可能性: "+c(W.value),1),h("p",null,"当前展示: "+c(m.value+1)+" / "+c(W.value),1),h("div",null,[e[12]||(e[12]=C(" 计算公式: ")),F.value==="permutation"?(f(),A("span",Ce," P("+c(n.value.length)+", "+c(i.value)+") = "+c(n.value.length)+"! / ("+c(n.value.length)+" - "+c(i.value)+")! ",1)):(f(),A("span",ke," C("+c(n.value.length)+", "+c(i.value)+") = "+c(n.value.length)+"! / ("+c(i.value)+"! × ("+c(n.value.length)+" - "+c(i.value)+")!) ",1))])]),l(ie,{class:"nav-buttons"},{default:o(()=>[l(x,{disabled:m.value<=0,onClick:ne},{default:o(()=>[l(M,null,{default:o(()=>[l(Z(me))]),_:1}),e[13]||(e[13]=C(" 上一个 "))]),_:1,__:[13]},8,["disabled"]),l(x,{disabled:m.value>=W.value-1,onClick:ue},{default:o(()=>[e[14]||(e[14]=C(" 下一个 ")),l(M,null,{default:o(()=>[l(Z(ge))]),_:1})]),_:1,__:[14]},8,["disabled"])]),_:1})]),_:1}),h("div",Ve,[l(fe,{ref:"stage",config:te},{default:o(()=>[l(de,{ref:"layer"},{default:o(()=>[(f(!0),A(ee,null,le(n.value,(v,g)=>(f(),y(Q,{key:"element-"+g},{default:o(()=>[k.value?(f(),y(T,{key:1,config:{x:70+g*80,y:70,width:60,height:60,fill:D(g),cornerRadius:8,shadowColor:"black",shadowBlur:5,shadowOpacity:.3,shadowOffset:{x:2,y:2}}},null,8,["config"])):(f(),y(P,{key:0,config:{x:100+g*80,y:100,radius:30,fill:D(g),strokeWidth:2,shadowColor:"black",shadowBlur:5,shadowOpacity:.3,shadowOffset:{x:2,y:2}}},null,8,["config"])),l(L,{config:{x:70+g*80,y:92,text:v,fontSize:20,fill:"#fff",align:"center",width:60}},null,8,["config"])]),_:2},1024))),128)),l(re,{config:{points:[70,200,550,200],pointerLength:10,pointerWidth:10,fill:"rgb(76,152,237)",stroke:"rgb(61,135,216,0.6)",strokeWidth:5}}),V.value.length>0?(f(!0),A(ee,{key:0},le(V.value,(v,g)=>(f(),y(Q,{key:"result-"+g},{default:o(()=>[k.value?(f(),y(T,{key:1,config:{x:70+g*80,y:270,width:60,height:60,fill:D(n.value.indexOf(v)),cornerRadius:8,shadowColor:"black",shadowBlur:5,shadowOpacity:.3,shadowOffset:{x:2,y:2}}},null,8,["config"])):(f(),y(P,{key:0,config:{x:100+g*80,y:300,radius:30,fill:D(n.value.indexOf(v)),strokeWidth:2,shadowColor:"black",shadowBlur:5,shadowOpacity:.3,shadowOffset:{x:2,y:2}}},null,8,["config"])),l(L,{config:{x:70+g*80,y:292,text:v,fontSize:20,fill:"#fff",align:"center",width:60}},null,8,["config"])]),_:2},1024))),128)):X("",!0),!k.value&&r.value?(f(),y(P,{key:1,config:{x:r.value.x,y:r.value.y,radius:30,fill:r.value.color,strokeWidth:2,shadowColor:"black",shadowBlur:5,shadowOpacity:.3,shadowOffset:{x:2,y:2}}},null,8,["config"])):k.value&&r.value?(f(),y(T,{key:2,config:{x:r.value.x-30,y:r.value.y-30,width:60,height:60,fill:r.value.color,cornerRadius:8,shadowColor:"black",shadowBlur:5,shadowOpacity:.3,shadowOffset:{x:2,y:2}}},null,8,["config"])):X("",!0),r.value?(f(),y(L,{key:3,config:{x:r.value.x-30,y:r.value.y-5,text:r.value.text,fontSize:20,fill:"#fff",align:"center",width:60}},null,8,["config"])):X("",!0)]),_:1},512)]),_:1},8,["config"])])])}}}),Se=ye(Be,[["__scopeId","data-v-bb7a1c4d"]]);export{Se as default};
