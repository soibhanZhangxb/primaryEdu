import{D as H}from"./dutils-CTazb8Sy.js";import{_ as W}from"./KTextWithBg.vue_vue_type_script_setup_true_lang-CGutHXZV.js";import P from"./DrawingTool-DQ0vMXpf.js";import{d as $,r as i,k as R,o as q,f as _,g as r,h as t,A as a,z as p,C as v,bB as y,bC as h,m as w,a as A,bF as S,B,_ as J}from"./index-CaGTsnvz.js";const K={class:"flex flex-col md:flex-row gap-6 p-4 bg-gray-50 shadow mkonva"},X={class:"flex-1"},Y={class:"border rounded-lg overflow-hidden bg-white"},O={class:"p-2 flex justify-between items-center border-left-blue"},Q={class:"flex gap-2"},Z={class:"relative"},ee={class:"w-full md:w-80 space-y-6"},te={class:"bg-white p-4 rounded-lg shadow border-left-blue"},se={class:"space-y-3"},oe={class:"flex items-center justify-between h-full"},le={class:"text-xl font-mono font-bold text-blue-600"},ne={class:"flex items-center justify-between h-full"},ae={class:"text-lg font-mono"},ie={class:"bg-white p-4 rounded-lg shadow"},re={class:"space-y-4"},ue={class:"block text-sm font-medium text-gray-700 mb-1"},de={class:"bg-white p-4 rounded-lg shadow"},fe={class:"space-y-2"},x=40,ce=$({name:"JInverse",__name:"jinverse",setup(me){let g=940,b=580,l={x:g/2,y:b/2};const k=i({lines:[],labels:[]}),u=i(1),L=i(!0),j=i(!0),V=i(!0),G=i(!1),C=i({x:0,y:0}),D=i(null),M=i(null),N=R(()=>`y = ${u.value}/x`),F=R(()=>!V.value||!L.value?[]:[{points:[0,l.y,g,l.y],stroke:"#ff6b6b",strokeWidth:2,dash:[5,5]},{points:[l.x,0,l.x,b],stroke:"#ff6b6b",strokeWidth:2,dash:[5,5]}]),I=R(()=>{if(!L.value)return null;const n=[[],[]],e=.1,f=l.x/x,d=l.y/x;for(let o=e;o<=f;o+=e){const c=u.value/o;Math.abs(c)>d+5||(n[0].push(l.x+o*x),n[0].push(l.y-c*x))}for(let o=-e;o>=-f;o-=e){const c=u.value/o;Math.abs(c)>d+5||(n[1].push(l.x+o*x),n[1].push(l.y-c*x))}return[{points:n[0],stroke:"#3a7bd5",strokeWidth:3,tension:.5},{points:n[1],stroke:"#3a7bd5",strokeWidth:3,tension:.5}]}),T=()=>{u.value=1};return q(()=>{var e;k.value=H.drawGrid(g,b,l,x);const n=(e=D.value)==null?void 0:e.getStage();n&&n.on("mousemove",f=>{const d=n.getPointerPosition();d&&(C.value={x:Math.round(d.x),y:Math.round(d.y)})})}),(n,e)=>{const f=v("v-line"),d=v("v-text"),o=v("v-layer"),c=v("v-stage"),z=v("el-slider"),E=v("el-button"),U=v("el-checkbox");return r(),_("div",K,[t("div",X,[t("div",Y,[t("div",null,[t("div",O,[e[4]||(e[4]=t("div",{class:"text-sm font-medium text-gray-700 bg-gray"}," 探索反比例函数 y = k/x 的图像变化规律 ",-1)),t("div",Q,[a(P,{enableDrawing:G.value,"onUpdate:enableDrawing":e[0]||(e[0]=s=>G.value=s),stageRef:D.value,drawingLayerRef:M.value},null,8,["enableDrawing","stageRef","drawingLayerRef"])])]),t("div",Z,[a(c,{ref_key:"stageRef",ref:D,config:{width:A(g),height:A(b)}},{default:p(()=>[a(o,null,{default:p(()=>[(r(!0),_(y,null,h(k.value.lines,(s,m)=>(r(),w(f,{key:"grid-"+m,config:s},null,8,["config"]))),128)),(r(!0),_(y,null,h(k.value.labels,(s,m)=>(r(),w(d,{key:"axe-label-"+m,config:s},null,8,["config"]))),128)),(r(!0),_(y,null,h(F.value,(s,m)=>(r(),w(f,{key:"asymptote-"+m,config:s},null,8,["config"]))),128)),(r(!0),_(y,null,h(I.value,(s,m)=>(r(),w(f,{key:m,config:s},null,8,["config"]))),128)),a(W,{text:N.value,x:A(g)-200,y:2,fontSize:16,"bg-color":"#3a7bd5bb","text-color":"white","corner-radius":8},null,8,["text","x"]),a(W,{text:"坐标: ( "+C.value.x+", "+C.value.y+" )",x:2,y:10,fontSize:16,"bg-color":"#333333bb","text-color":"white","corner-radius":8},null,8,["text"])]),_:1}),a(o,{ref_key:"drawingLayerRef",ref:M},null,512)]),_:1},8,["config"])])])])]),t("div",ee,[t("div",te,[e[7]||(e[7]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"方程信息:",-1)),t("div",se,[t("div",oe,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-600"},"标准形式",-1)),t("p",le,S(N.value),1)]),t("div",ne,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-600"},"比例系数 K",-1)),t("p",ae,S(u.value.toFixed(2)),1)])])]),t("div",ie,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"参数控制",-1)),t("div",re,[t("div",null,[t("label",ue," 比例系数k: "+S(u.value.toFixed(2)),1),a(z,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),min:-10,max:10,step:.1,"show-input":""},null,8,["modelValue"])]),a(E,{type:"info",class:"w-full",onClick:T},{default:p(()=>e[8]||(e[8]=[B(" 重置 ")])),_:1,__:[8]})])]),t("div",de,[e[12]||(e[12]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"显示选项",-1)),t("div",fe,[a(U,{modelValue:j.value,"onUpdate:modelValue":e[2]||(e[2]=s=>j.value=s)},{default:p(()=>e[10]||(e[10]=[B("显示网格")])),_:1,__:[10]},8,["modelValue"]),a(U,{modelValue:V.value,"onUpdate:modelValue":e[3]||(e[3]=s=>V.value=s)},{default:p(()=>e[11]||(e[11]=[B("显示渐近线")])),_:1,__:[11]},8,["modelValue"])])])])])}}}),pe=J(ce,[["__scopeId","data-v-b667522d"]]);export{pe as default};
