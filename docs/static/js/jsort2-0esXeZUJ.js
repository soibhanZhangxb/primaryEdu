import{_ as ge,a as d,m as me,h as r,k as w,e as p,f as n,w as s,g as f,i as z,t as I,j as g,v as he,F as $,l as Q,b as G}from"./index-BPKU8qQX.js";const be={class:"sorting-animation-app"},ke={class:"slider-value"},we={class:"control-buttons"},xe={key:0,class:"sorting-info"},ye={class:"canvas-wrapper"},Se={class:"canvas-hint"},je={key:0},Ie={key:1},Ve={key:2},J=1e3,K=500,Ce={__name:"jsort2",setup(Be){const O=d({width:J,height:K}),V=d(15),A=d(80),a=d([]),F=d([]),B=d("bubble"),b=d(300),i=d(!1),x=d(!1),c=d(!1),k=d(0),y=d(0),_=d({i:-1,j:-1,pivot:-1}),D=()=>{U();const l=[],e=Math.floor((J-40)/V.value)-2,t=[];for(;t.length<V.value;){const u=Math.floor(Math.random()*A.value)+10;t.includes(u)||t.push(u)}t.forEach((u,o)=>{const h=u*4;l.push({value:u,width:e,height:h,x:20+o*(e+2),y:K-h-20,originalIndex:o})}),a.value=l,F.value=[...l]},X=l=>c.value?"#67C23A":l===_.value.i||l===_.value.j?"#F56C6C":l===_.value.pivot?"#E6A23C":"#409EFF",P=()=>({bubble:"冒泡排序",selection:"选择排序",insertion:"插入排序",quick:"快速排序"})[B.value]||"排序",E=d(-1),Y=l=>{E.value=l},Z=(l,e)=>{if(E.value!==l)return;a.value[l].x=e.target.x();const t=a.value[l];a.value.forEach((u,o)=>{o!==l&&t.x+t.width/2>u.x+u.width/2&&([a.value[l],a.value[o]]=[a.value[o],a.value[l]],E.value=o)})},ee=()=>{const l=[...a.value].sort((e,t)=>e.x-t.x);l.forEach((e,t)=>{const u=e.width;e.x=20+t*(u+2)}),a.value=l,le(),E.value=-1},le=()=>{for(let l=0;l<a.value.length-1;l++)if(a.value[l].value>a.value[l+1].value){c.value=!1;return}c.value=!0,i.value=!1};let m;const R=()=>{if(!(i.value&&!x.value))switch(i.value=!0,x.value=!1,k.value=0,y.value=0,B.value){case"bubble":W();break;case"selection":te();break;case"insertion":ne();break;case"quick":oe();break;default:W()}},ae=()=>{i.value&&(x.value=!x.value,x.value?clearInterval(m):R())},U=()=>{i.value=!1,x.value=!1,c.value=!1,k.value=0,y.value=0,_.value={i:-1,j:-1,pivot:-1},clearInterval(m),a.value=[...F.value]},W=()=>{let l=0,e=0;m=setInterval(()=>{if(l>=a.value.length-1){clearInterval(m),c.value=!0,i.value=!1,_.value={i:-1,j:-1};return}e<a.value.length-l-1?(_.value={i:e,j:e+1},k.value++,a.value[e].value>a.value[e+1].value&&([a.value[e],a.value[e+1]]=[a.value[e+1],a.value[e]],y.value++,M()),e++):(e=0,l++)},b.value)},te=()=>{let l=0,e=l+1,t=l;m=setInterval(()=>{if(l>=a.value.length-1){clearInterval(m),c.value=!0,i.value=!1,_.value={i:-1,j:-1};return}e<a.value.length?(_.value={i:t,j:e},k.value++,a.value[e].value<a.value[t].value&&(t=e),e++):(t!==l&&([a.value[l],a.value[t]]=[a.value[t],a.value[l]],y.value++,M()),l++,e=l+1,t=l)},b.value)},ne=()=>{var u;let l=1,e=l,t=(u=a.value[l])==null?void 0:u.value;m=setInterval(()=>{var o;if(l>=a.value.length){clearInterval(m),c.value=!0,i.value=!1,_.value={i:-1,j:-1};return}e>0&&a.value[e-1].value>t?(_.value={i:e,j:e-1},k.value++,a.value[e]=a.value[e-1],e--,M()):(a.value[e]=F.value[l],l++,e=l,t=(o=a.value[l])==null?void 0:o.value)},b.value)},oe=()=>{const l=[];l.push(0),l.push(a.value.length-1);let e=1,t;const u=()=>{if(e>=0){const o=l[e--],h=l[e--];t=h;const S=a.value[o].value,C=()=>{t<o?(_.value={i:t,j:o,pivot:o},k.value++,a.value[t].value<=S?t++:([a.value[t],a.value[o-1]]=[a.value[o-1],a.value[t]],[a.value[o-1],a.value[o]]=[a.value[o],a.value[o-1]],y.value++,M()),setTimeout(C,b.value)):(t-1>h&&(l[++e]=h,l[++e]=t-1),t+1<o&&(l[++e]=t+1,l[++e]=o),e>=0?setTimeout(u,b.value):(c.value=!0,i.value=!1,_.value={i:-1,j:-1,pivot:-1}))};C()}};u()},M=()=>{const l=[...a.value].sort((e,t)=>e.x-t.x);l.forEach((e,t)=>{const u=e.width;e.x=20+t*(u+2)}),a.value=l};me(()=>{D()});const se=()=>{};return window.addEventListener("resize",se),(l,e)=>{const t=r("el-header"),u=r("el-slider"),o=r("el-form-item"),h=r("el-input-number"),S=r("el-button"),C=r("el-form"),N=r("el-option"),ue=r("el-select"),q=r("el-descriptions-item"),re=r("el-descriptions"),T=r("el-card"),ve=r("el-aside"),ie=r("v-rect"),ce=r("v-text"),de=r("v-layer"),_e=r("v-stage"),fe=r("el-main"),H=r("el-container"),pe=r("el-footer");return p(),w("div",be,[n(H,null,{default:s(()=>[n(t,{class:"app-header"},{default:s(()=>e[4]||(e[4]=[f("div",{class:"header-content"},[f("h1",null,"图形化排序动画学习工具"),f("p",null,"通过动画直观理解各种排序算法的工作原理")],-1)])),_:1,__:[4]}),n(H,{class:"main-container"},{default:s(()=>[n(ve,{width:"300px",class:"control-panel"},{default:s(()=>[n(T,{title:"控制面板",class:"control-card"},{default:s(()=>[n(C,{"label-width":"100px",class:"setting-form"},{default:s(()=>[n(o,{label:"数据数量"},{default:s(()=>[n(u,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=v=>V.value=v),min:5,max:30,step:1,onChange:D},null,8,["modelValue"]),f("span",ke,I(V.value),1)]),_:1}),n(o,{label:"数据范围"},{default:s(()=>[n(h,{modelValue:A.value,"onUpdate:modelValue":e[1]||(e[1]=v=>A.value=v),min:10,max:100,step:10,onChange:D},null,8,["modelValue"])]),_:1}),n(o,null,{default:s(()=>[n(S,{type:"primary",icon:"Refresh",class:"generate-btn",onClick:D},{default:s(()=>e[5]||(e[5]=[g(" 生成新数据 ")])),_:1,__:[5]})]),_:1})]),_:1}),n(C,{"label-width":"100px",class:"algorithm-form"},{default:s(()=>[n(o,{label:"排序算法"},{default:s(()=>[n(ue,{modelValue:B.value,"onUpdate:modelValue":e[2]||(e[2]=v=>B.value=v),placeholder:"选择算法",class:"algorithm-select"},{default:s(()=>[n(N,{label:"冒泡排序",value:"bubble"}),n(N,{label:"选择排序",value:"selection"}),n(N,{label:"插入排序",value:"insertion"}),n(N,{label:"快速排序",value:"quick"})]),_:1},8,["modelValue"])]),_:1}),n(o,{label:"动画速度"},{default:s(()=>[n(u,{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=v=>b.value=v),min:50,max:1e3,step:50,reverse:!0},null,8,["modelValue"])]),_:1})]),_:1}),f("div",we,[n(S,{type:"success",icon:"Play",disabled:i.value||c.value,class:"control-btn",onClick:R},{default:s(()=>e[6]||(e[6]=[g(" 开始排序 ")])),_:1,__:[6]},8,["disabled"]),n(S,{type:"warning",icon:"Pause",disabled:!i.value,class:"control-btn",onClick:ae},{default:s(()=>e[7]||(e[7]=[g(" 暂停 ")])),_:1,__:[7]},8,["disabled"]),n(S,{type:"danger",icon:"Stop",class:"control-btn",onClick:U},{default:s(()=>e[8]||(e[8]=[g(" 重置 ")])),_:1,__:[8]})]),i.value||c.value?(p(),w("div",xe,[n(re,{column:"1",border:""},{default:s(()=>[n(q,{label:"状态"},{default:s(()=>[f("span",{class:he(c.value?"status-sorted":"status-sorting")},I(c.value?"已完成":"排序中"),3)]),_:1}),n(q,{label:"比较次数"},{default:s(()=>[g(I(k.value),1)]),_:1}),n(q,{label:"交换次数"},{default:s(()=>[g(I(y.value),1)]),_:1})]),_:1})])):z("",!0)]),_:1})]),_:1}),n(fe,{class:"canvas-container"},{default:s(()=>[n(T,{class:"canvas-card"},{default:s(()=>[f("div",ye,[n(_e,{config:O.value,class:"konva-stage"},{default:s(()=>[n(de,null,{default:s(()=>[(p(!0),w($,null,Q(a.value,(v,j)=>(p(),G(ie,{key:j,config:{x:v.x,y:v.y,width:v.width,height:v.height,fill:X(j),cornerRadius:4},draggable:!i.value&&!c.value,onDragstart:L=>Y(j),onDragmove:L=>Z(j,L),onDragend:ee},null,8,["config","draggable","onDragstart","onDragmove"]))),128)),(p(!0),w($,null,Q(a.value,(v,j)=>(p(),G(ce,{key:`text-${j}`,config:{x:v.x+v.width/2,y:v.y-20,text:v.value,fontSize:14,fill:"#333",align:"center",verticalAlign:"middle"}},null,8,["config"]))),128))]),_:1})]),_:1},8,["config"])]),f("div",Se,[!i.value&&!c.value?(p(),w("p",je,e[9]||(e[9]=[f("i",{class:"el-icon-info"},null,-1),g(" 提示：您可以拖拽方块手动排序，或选择算法观看动画 ")]))):z("",!0),i.value?(p(),w("p",Ie,[e[10]||(e[10]=f("i",{class:"el-icon-loading"},null,-1)),g(" 正在进行"+I(P())+"... ",1)])):z("",!0),c.value?(p(),w("p",Ve,[e[11]||(e[11]=f("i",{class:"el-icon-success"},null,-1)),g(" "+I(P())+"已完成！ ",1)])):z("",!0)])]),_:1})]),_:1})]),_:1}),n(pe,{class:"app-footer"},{default:s(()=>e[12]||(e[12]=[f("p",null,"图形化排序动画学习工具 © 2023",-1)])),_:1,__:[12]})]),_:1})])}}},Ee=ge(Ce,[["__scopeId","data-v-85b782be"]]);export{Ee as default};
