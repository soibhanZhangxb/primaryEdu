import{D as oe}from"./dutils-0Z0zhYva.js";import{_ as C}from"./KTextWithBg.vue_vue_type_script_setup_true_lang-48_gf6ZU.js";import ne from"./DrawingTool-DD_faqZE.js";import{s as ae}from"./index-I7thvi85.js";import{d as ue,a as f,p as c,m as ie,k as z,e as v,g as t,f as d,w as p,h as y,b as g,i as I,F as R,l as L,u as P,t as b,j as _,_ as re}from"./index-DtWb8qEC.js";const de={class:"flex flex-col md:flex-row gap-6 p-4 bg-gray-50 shadow mkonva"},fe={class:"flex-1"},ve={class:"border rounded-lg overflow-hidden bg-white"},xe={class:"p-2 flex justify-between items-center border-left-blue"},ce={class:"flex gap-2"},me={class:"relative"},pe={class:"w-full md:w-80 space-y-6"},ye={class:"bg-white p-4 rounded-lg shadow border-left-blue"},ge={class:"space-y-3"},be={class:"flex items-center justify-between h-full"},_e={class:"text-xl font-mono font-bold text-blue-600"},we={class:"flex items-center justify-between h-full"},he={class:"text-lg font-mono"},Ve={class:"flex items-center justify-between h-full",style:{padding:"0 5px",background:"#4c484829","border-radius":"8px"}},ke={class:"text-lg font-mono"},$e={class:"flex items-center justify-between h-full"},Se={class:"text-lg font-mono"},Fe={class:"flex items-center justify-between h-full"},ze={class:"text-lg font-mono"},Me={class:"flex items-center justify-between h-full"},je={class:"text-lg font-mono"},De={class:"bg-white p-4 rounded-lg shadow"},Ue={class:"space-y-4"},Ae={class:"block text-sm font-medium text-gray-700 mb-1"},Ce={class:"block text-sm font-medium text-gray-700 mb-1"},Ie={class:"block text-sm font-medium text-gray-700 mb-1"},Re={class:"bg-white p-4 rounded-lg shadow"},Le={class:"space-y-2"},i=40,qe="$$x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}$$",Ee=ue({name:"JQuadratic",__name:"jquadratic",setup(Ne){let q=940,M=580,n={x:q/2,y:M/2};const E=f({lines:[],labels:[]}),u=f(1),r=f(0),x=f(0),j=f(!0),N=f(!0),V=f(!0),T=f(!0),D=f(!0),U=f(!0),H=f(!1),W=f({x:0,y:0}),G=f(null),X=f(null),K=c(()=>{let l="y = ";const{value:e}=u,{value:o}=r,{value:a}=x;if(e===0){if(o===0)return`y = ${a}`;if(Math.abs(o)===1?l+=o>0?"x":"-x":l+=`${o}x`,a!==0){const m=a>0?" + ":" - ";l+=`${m}${Math.abs(a)}`}return l}if(Math.abs(e)===1?l+=e>0?"x²":"-x²":l+=`${e}x²`,o!==0){const m=o>0?" + ":" - ";Math.abs(o)===1?l+=`${m}x`:l+=`${m}${Math.abs(o)}x`}if(a!==0){const m=a>0?" + ":" - ";l+=`${m}${Math.abs(a)}`}return l}),J=c(()=>r.value*r.value-4*u.value*x.value),k=c(()=>{const l=J.value;if(l<0)return[];if(u.value===0)return r.value===0?[]:[-x.value/r.value];const e=Math.sqrt(l),o=(-r.value-e)/(2*u.value),a=(-r.value+e)/(2*u.value);return l===0?[o]:[o,a]}),w=c(()=>{if(u.value===0)return null;const l=-r.value/(2*u.value),e=u.value*l*l+r.value*l+x.value;return{x:l,y:e}}),A=c(()=>u.value===0?null:-r.value/(2*u.value)),O=c(()=>{if(!V.value||u.value===0)return null;const l=[];for(let e=-n.x/i;e<=n.x/i;e+=.1){const o=e,a=u.value*o*o+r.value*o+x.value;a>=-n.y/i&&a<=n.y/i&&(l.push(n.x+o*i),l.push(n.y-a*i))}return{points:l,stroke:"#3a7bd5",strokeWidth:3,tension:.2}}),Q=c(()=>{if(!N.value||!V.value||A.value===null)return null;const l=n.x+A.value*i;return{points:[l,0,l,M],stroke:"#ff6b6b",strokeWidth:2,dash:[5,5]}}),$=c(()=>{if(!j.value||!V.value||w.value===null)return null;const{x:l,y:e}=w.value;return{x:n.x+l*i,y:n.y-e*i,text:`顶点: (${l.toFixed(2)}, ${e.toFixed(2)})`,fontSize:16,fill:"#ff6b6b"}}),S=c(()=>!U.value||!V.value?null:{x:n.x+10,y:n.y-x.value*i-10,text:`y截距: ${x.value.toFixed(2)}`,fontSize:16,fill:"#4ecdc4"}),Z=c(()=>{if(!V.value)return[];const l=[];if(U.value&&l.push({x:n.x,y:n.y-x.value*i,radius:6,fill:"#4ecdc4",stroke:"#fff",strokeWidth:2}),D.value&&k.value.forEach(e=>{l.push({x:n.x+e*i,y:n.y,radius:6,fill:"#ffa502",stroke:"#fff",strokeWidth:2})}),j.value&&w.value){const{x:e,y:o}=w.value;l.push({x:n.x+e*i,y:n.y-o*i,radius:6,fill:"#ff6b6b",stroke:"#fff",strokeWidth:2})}return l}),ee=c(()=>!D.value||!V.value||k.value.length===0?[]:k.value.map((l,e)=>({x:n.x+l*i,y:n.y+20,text:`解: ${l.toFixed(2)}`,fontSize:16,fill:"#EE2A2AD1"}))),te=()=>{u.value=1,r.value=0,x.value=0};return ie(()=>{var e;E.value=oe.drawGrid(q,M,n,i);const l=(e=G.value)==null?void 0:e.getStage();l&&l.on("mousemove",o=>{const a=l.getPointerPosition();a&&(W.value={x:Math.round(a.x),y:Math.round(a.y)})})}),(l,e)=>{const o=y("v-line"),a=y("v-text"),m=y("v-circle"),Y=y("v-layer"),le=y("v-stage"),B=y("el-slider"),se=y("el-button"),F=y("el-checkbox");return v(),z("div",de,[t("div",fe,[t("div",ve,[t("div",null,[t("div",xe,[e[9]||(e[9]=t("div",{class:"text-sm font-medium text-gray-700 bg-gray"}," 探索二次函数 y = ax² + bx + c 的图像变化规律 ",-1)),t("div",ce,[d(ne,{enableDrawing:H.value,"onUpdate:enableDrawing":e[0]||(e[0]=s=>H.value=s),stageRef:G.value,drawingLayerRef:X.value},null,8,["enableDrawing","stageRef","drawingLayerRef"])])]),t("div",me,[d(le,{ref_key:"stageRef",ref:G,config:{width:P(q),height:P(M)}},{default:p(()=>[d(Y,null,{default:p(()=>[(v(!0),z(R,null,L(E.value.lines,(s,h)=>(v(),g(o,{key:"grid-"+h,config:s},null,8,["config"]))),128)),(v(!0),z(R,null,L(E.value.labels,(s,h)=>(v(),g(a,{key:"axe-label-"+h,config:s},null,8,["config"]))),128)),O.value?(v(),g(o,{key:0,config:O.value},null,8,["config"])):I("",!0),Q.value?(v(),g(o,{key:1,config:Q.value},null,8,["config"])):I("",!0),$.value?(v(),g(C,{key:2,text:$.value.text,x:$.value.x+10,y:$.value.y-10,fontSize:$.value.fontSize,"bg-color":"#ff6b6b88","text-color":"white","corner-radius":8},null,8,["text","x","y","fontSize"])):I("",!0),S.value?(v(),g(C,{key:3,text:S.value.text,x:S.value.x,y:S.value.y,fontSize:S.value.fontSize,"bg-color":"#10b98188","text-color":"white","corner-radius":8},null,8,["text","x","y","fontSize"])):I("",!0),(v(!0),z(R,null,L(ee.value,(s,h)=>(v(),g(C,{key:"x-intercept-"+h,text:s.text,x:s.x+10,y:s.y,fontSize:s.fontSize,"bg-color":"#ffa50288","text-color":"white","corner-radius":8},null,8,["text","x","y","fontSize"]))),128)),(v(!0),z(R,null,L(Z.value,(s,h)=>(v(),g(m,{key:"point-"+h,config:s},null,8,["config"]))),128)),d(C,{text:"坐标: ( "+W.value.x+", "+W.value.y+" )",x:2,y:10,fontSize:16,"bg-color":"#333333bb","text-color":"white","corner-radius":8},null,8,["text"])]),_:1}),d(Y,{ref_key:"drawingLayerRef",ref:X},null,512)]),_:1},8,["config"])])])])]),t("div",pe,[t("div",ye,[e[17]||(e[17]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"方程信息:",-1)),t("div",ge,[t("div",be,[e[10]||(e[10]=t("p",{class:"text-sm text-gray-600"},"标准形式",-1)),t("p",_e,b(K.value),1)]),t("div",we,[e[11]||(e[11]=t("p",{class:"text-sm text-gray-600"},"判别式:",-1)),t("p",he,b("△ = b² - 4ac, "+J.value.toFixed(2)),1)]),t("div",Ve,[e[12]||(e[12]=t("p",{class:"text-sm text-gray-600"},"求根公式:",-1)),t("p",ke,[d(P(ae),{formula:qe})])]),e[16]||(e[16]=t("div",{class:"flex items-center justify-between h-full"},[t("p",{class:"text-sm text-gray-600"},"顶点坐标:"),t("p",{class:"text-lg font-mono"},[_("x = -b/(2a), "),t("br"),_("y = c - b²/(4a)")])],-1)),t("div",$e,[e[13]||(e[13]=t("p",{class:"text-sm text-gray-600"},"顶点坐标点",-1)),t("p",Se,b(w.value!==null?`(${w.value.x.toFixed(2)}, ${w.value.y.toFixed(2)})`:"无"),1)]),t("div",Fe,[e[14]||(e[14]=t("p",{class:"text-sm text-gray-600"},"X轴交点",-1)),t("p",ze,b(k.value.length>0?k.value.map(s=>s.toFixed(2)).join(", "):"无实根"),1)]),t("div",Me,[e[15]||(e[15]=t("p",{class:"text-sm text-gray-600"},"对称轴",-1)),t("p",je,b(A.value!==null?`x = ${A.value.toFixed(2)}`:"无"),1)])])]),t("div",De,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"参数控制",-1)),t("div",Ue,[t("div",null,[t("label",Ae," 二次项系数a: "+b(u.value.toFixed(2)),1),d(B,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),min:-5,max:5,step:.1,"show-input":""},null,8,["modelValue"])]),t("div",null,[t("label",Ce," 一次项系数b: "+b(r.value.toFixed(2)),1),d(B,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=s=>r.value=s),min:-10,max:10,step:.1,"show-input":""},null,8,["modelValue"])]),t("div",null,[t("label",Ie," 常数项c: "+b(x.value.toFixed(2)),1),d(B,{modelValue:x.value,"onUpdate:modelValue":e[3]||(e[3]=s=>x.value=s),min:-10,max:10,step:.1,"show-input":""},null,8,["modelValue"])]),d(se,{type:"info",class:"w-full",onClick:te},{default:p(()=>e[18]||(e[18]=[_(" 重置 ")])),_:1,__:[18]})])]),t("div",Re,[e[25]||(e[25]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"显示选项",-1)),t("div",Le,[d(F,{modelValue:T.value,"onUpdate:modelValue":e[4]||(e[4]=s=>T.value=s)},{default:p(()=>e[20]||(e[20]=[_("显示网格")])),_:1,__:[20]},8,["modelValue"]),d(F,{modelValue:j.value,"onUpdate:modelValue":e[5]||(e[5]=s=>j.value=s)},{default:p(()=>e[21]||(e[21]=[_("显示顶点")])),_:1,__:[21]},8,["modelValue"]),d(F,{modelValue:N.value,"onUpdate:modelValue":e[6]||(e[6]=s=>N.value=s)},{default:p(()=>e[22]||(e[22]=[_("显示对称轴")])),_:1,__:[22]},8,["modelValue"]),d(F,{modelValue:U.value,"onUpdate:modelValue":e[7]||(e[7]=s=>U.value=s)},{default:p(()=>e[23]||(e[23]=[_("显示y截距")])),_:1,__:[23]},8,["modelValue"]),d(F,{modelValue:D.value,"onUpdate:modelValue":e[8]||(e[8]=s=>D.value=s),disabled:k.value.length===0},{default:p(()=>e[24]||(e[24]=[_(" 显示x截距 ")])),_:1,__:[24]},8,["modelValue","disabled"])])])])])}}}),He=re(Ee,[["__scopeId","data-v-a2bd97e0"]]);export{He as default};
