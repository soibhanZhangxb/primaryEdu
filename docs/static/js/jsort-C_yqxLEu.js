var K=Object.defineProperty,Q=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var P=(g,r,i)=>r in g?K(g,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):g[r]=i,N=(g,r)=>{for(var i in r||(r={}))ee.call(r,i)&&P(g,i,r[i]);if(E)for(var i of E(r))te.call(r,i)&&P(g,i,r[i]);return g},T=(g,r)=>Q(g,Z(r));import{d as oe,y as U,r as x,f as w,g as y,A as s,h as F,z as v,C as c,B as $,bB as X,bC as S,m as j,cA as ne,_ as le}from"./index-CaGTsnvz.js";const ae={class:"sorting-demo-container"},se={class:"canvas-container"},re=oe({__name:"jsort",setup(g){const r=U({width:600,height:400}),i=x(5),C=x("asc"),k=x(500),p=x(!1),u=x([]),M=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F06292","#7986CB","#9575CD","#64B5F6","#4DB6AC","#81C784","#FFD54F"],I=()=>{const t=[];for(let l=0;l<i.value;l++){const d=Math.floor(Math.random()*90)+10,_=d*2;t.push({id:`item-${l}`,value:d,height:_,x:100+l*60,y:300-_,originalX:100+l*60,color:M[l%M.length],order:l})}u.value=t},A=()=>{if(p.value){ne.warning("请等待排序动画完成");return}I()},z=()=>{if(p.value)return;p.value=!0;let t=[...u.value];C.value==="asc"?t.sort((n,l)=>n.value-l.value):C.value==="desc"&&t.sort((n,l)=>l.value-n.value),O(t)},O=t=>{const n=k.value,l=Date.now(),d=u.value.reduce((o,a)=>(o[a.id]={x:a.x,y:a.y},o),{}),_={};t.forEach((o,a)=>{_[o.id]={x:100+a*60,y:o.y}});const m=()=>{const o=Date.now()-l,a=Math.min(o/n,1);u.value.forEach(h=>{const f=d[h.id],b=_[h.id];f&&b&&(h.x=f.x+(b.x-f.x)*a)}),a<1?requestAnimationFrame(m):(u.value=t.map((h,f)=>T(N({},h),{x:100+f*60,originalX:100+f*60,order:f})),p.value=!1)};m()},D=x(null),B=U({x:0,y:0}),W=t=>{p.value||(D.value=t,B.x=t.x,B.y=t.y)},Y=t=>{p.value||(t.y=B.y)},q=()=>{if(p.value||!D.value)return;const t=D.value,n=t.x;let l=Math.round((n-100)/60);l=Math.max(0,Math.min(u.value.length-1,l));const d=100+l*60;t.x=d,t.originalX=d,u.value.filter(o=>o.id!==t.id).sort((o,a)=>o.originalX-a.originalX);let m=0;for(let o=0;o<u.value.length;o++){if(u.value[o].id===t.id)continue;const a=100+m*60;a>=d&&m++,u.value[o].x=a,u.value[o].originalX=a,m++}u.value.sort((o,a)=>o.originalX-a.originalX),D.value=null};return I(),(t,n)=>{const l=c("el-slider"),d=c("el-form-item"),_=c("el-option"),m=c("el-select"),o=c("el-button"),a=c("el-form"),h=c("el-card"),f=c("v-line"),b=c("v-group"),L=c("v-rect"),R=c("v-text"),G=c("v-layer"),H=c("v-stage");return y(),w("div",ae,[s(h,{class:"control-panel"},{header:v(()=>n[3]||(n[3]=[F("div",{class:"card-header"},[F("span",null,"排序学习演示")],-1)])),default:v(()=>[s(a,{"label-width":"100px"},{default:v(()=>[s(d,{label:"元素数量"},{default:v(()=>[s(l,{modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=e=>i.value=e),min:3,max:10,onChange:A},null,8,["modelValue"])]),_:1}),s(d,{label:"排序类型"},{default:v(()=>[s(m,{modelValue:C.value,"onUpdate:modelValue":n[1]||(n[1]=e=>C.value=e),placeholder:"请选择排序类型"},{default:v(()=>[s(_,{label:"升序",value:"asc"}),s(_,{label:"降序",value:"desc"}),s(_,{label:"随机",value:"random"})]),_:1},8,["modelValue"])]),_:1}),s(d,{label:"动画速度"},{default:v(()=>[s(l,{modelValue:k.value,"onUpdate:modelValue":n[2]||(n[2]=e=>k.value=e),min:100,max:1e3,step:100},null,8,["modelValue"])]),_:1}),s(o,{type:"primary",onClick:z},{default:v(()=>n[4]||(n[4]=[$("开始排序")])),_:1,__:[4]}),s(o,{onClick:A},{default:v(()=>n[5]||(n[5]=[$("重置")])),_:1,__:[5]})]),_:1})]),_:1}),F("div",se,[s(H,{ref:"stage",config:r,onDragend:q},{default:v(()=>[s(G,{ref:"layer"},{default:v(()=>[(y(),w(X,null,S(10,e=>s(b,{key:"grid-x-"+e},{default:v(()=>[s(f,{config:{points:[e*60,0,e*60,600],stroke:"#eee",strokeWidth:1}},null,8,["config"]),s(f,{config:{points:[0,e*60,600,e*60],stroke:"#eee",strokeWidth:1}},null,8,["config"])]),_:2},1024)),64)),(y(!0),w(X,null,S(u.value,(e,V)=>(y(),j(L,{key:"item-"+V,config:{x:e.x,y:e.y,width:50,height:e.height,fill:e.color,shadowColor:"black",shadowBlur:5,shadowOpacity:.3,shadowOffset:{x:2,y:2},cornerRadius:5,draggable:!0,id:e.id},onDragstart:J=>W(e),onDragmove:J=>Y(e)},null,8,["config","onDragstart","onDragmove"]))),128)),(y(!0),w(X,null,S(u.value,(e,V)=>(y(),j(R,{key:"text-"+V,config:{x:e.x+25,y:e.y+e.height+10,text:e.value.toString(),fontSize:20,fill:"#333",align:"center",width:50}},null,8,["config"]))),128))]),_:1},512)]),_:1},8,["config"])])])}}}),ce=le(re,[["__scopeId","data-v-833a14ea"]]);export{ce as default};
