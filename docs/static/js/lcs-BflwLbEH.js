import{D as oe}from"./dutils-CTazb8Sy.js";import ie from"./DrawingTool-Cba_syAv.js";import{d as ae,r as g,k as Z,o as re,f as _,g as p,h as n,A as v,z as $,C as b,bE as X,m as A,bB as J,bC as B,bF as k,B as D,_ as ue}from"./index-Dks_UUQM.js";const de={class:"flex flex-col md:flex-row gap-6 p-4 bg-gray-50 shadow mkonva"},ce={class:"flex-1"},fe={class:"border rounded-lg overflow-hidden bg-white"},ge={class:"p-2 flex justify-between items-center border-left-blue"},pe={class:"flex gap-2"},ve={class:"relative"},he={class:"w-full md:w-80 space-y-6"},me={class:"bg-white p-4 rounded-lg shadow border-left-blue"},ye={class:"space-y-3"},xe={class:"flex items-center justify-between h-full"},_e={class:"text-xl font-mono font-bold text-blue-600"},be={class:"flex items-center justify-between h-full"},Se={class:"text-xl font-mono font-bold text-blue-600"},we={class:"bg-white p-4 rounded-lg shadow"},Ne={class:"space-y-4"},$e={class:"flex items-center justify-between h-full"},Je={class:"flex items-center justify-between h-full"},ke={class:"block text-sm font-medium text-gray-700 mb-1"},Ce={class:"bg-white p-4 rounded-lg shadow"},Oe={class:"step-controls"},Ae={class:"mt-3 text-center text-sm text-gray-600"},Le={class:"bg-white p-4 rounded-lg shadow"},Ve={class:"result-box"},Be={class:"text-lg font-mono mt-2 text-blue-600 font-bold"},R=940,j=580,i=60,De=ae({name:"JLCSVisualizer",__name:"lcs",setup(Re){const q={x:R/2,y:j/2},E=g({lines:[],labels:[]}),S=g("ABCBDAB"),w=g("BDCABA"),z=g(500),L=g(!1),a=g(0),V=g(0),F=g(""),h=g([]),K=g(!0),U=g(!1);g({x:0,y:0});const G=g(null),T=g(null),y={current:"#ff7875",match:"#95de64",left:"#69c0ff",top:"#69c0ff",topLeft:"#ff9c6e",arrow:"#597ef7",text:"#314659"},Y=()=>{const r=S.value,t=w.value,x=r.length,c=t.length,o=Array(x+1).fill(0).map(()=>Array(c+1).fill(0)),u=Array(x+1).fill("").map(()=>Array(c+1).fill("")),N=[];for(let e=0;e<=x;e++)o[e][0]=0,u[e][0]="↑";for(let e=0;e<=c;e++)o[0][e]=0,u[0][e]="←";N.push({description:"初始化DP表：第一行和第一列都设为0",dp:JSON.parse(JSON.stringify(o)),directions:JSON.parse(JSON.stringify(u)),i:0,j:0,highlight:[]});for(let e=1;e<=x;e++)for(let s=1;s<=c;s++){const O=[{i:e,j:s,color:y.current},{i:e-1,j:s,color:y.top},{i:e,j:s-1,color:y.left},{i:e-1,j:s-1,color:y.topLeft}];r[e-1]===t[s-1]?(o[e][s]=o[e-1][s-1]+1,u[e][s]="↖",N.push({description:`X[${e}] = '${r[e-1]}' 和 Y[${s}] = '${t[s-1]}' 相等，取左上角值 ${o[e-1][s-1]} + 1 = ${o[e][s]}`,dp:JSON.parse(JSON.stringify(o)),directions:JSON.parse(JSON.stringify(u)),i:e,j:s,highlight:O})):o[e-1][s]>=o[e][s-1]?(o[e][s]=o[e-1][s],u[e][s]="↑",N.push({description:`X[${e}] = '${r[e-1]}' 和 Y[${s}] = '${t[s-1]}' 不相等，取上面值 ${o[e-1][s]}（大于左边值 ${o[e][s-1]}）`,dp:JSON.parse(JSON.stringify(o)),directions:JSON.parse(JSON.stringify(u)),i:e,j:s,highlight:O})):(o[e][s]=o[e][s-1],u[e][s]="←",N.push({description:`X[${e}] = '${r[e-1]}' 和 Y[${s}] = '${t[s-1]}' 不相等，取左边值 ${o[e][s-1]}（大于上面值 ${o[e-1][s]}）`,dp:JSON.parse(JSON.stringify(o)),directions:JSON.parse(JSON.stringify(u)),i:e,j:s,highlight:O}))}let d=x,f=c;const m=[],l=[];for(;d>0&&f>0;){const e=[{i:d,j:f,color:y.current}];u[d][f]==="↖"?(m.unshift(r[d-1]),l.push({description:`回溯：X[${d}] = '${r[d-1]}' 和 Y[${f}] = '${t[f-1]}' 匹配，加入LCS`,dp:JSON.parse(JSON.stringify(o)),directions:JSON.parse(JSON.stringify(u)),i:d,j:f,highlight:e,lcs:[...m]}),d--,f--):u[d][f]==="↑"?(l.push({description:`回溯：方向向上，移动到 (${d-1}, ${f})`,dp:JSON.parse(JSON.stringify(o)),directions:JSON.parse(JSON.stringify(u)),i:d,j:f,highlight:e}),d--):(l.push({description:`回溯：方向向左，移动到 (${d}, ${f-1})`,dp:JSON.parse(JSON.stringify(o)),directions:JSON.parse(JSON.stringify(u)),i:d,j:f,highlight:e}),f--)}h.value=[...N,...l],V.value=h.value.length,F.value=m.join(""),a.value=0};let I=null;const Q=()=>{if(L.value){C();return}L.value=!0,I=setInterval(()=>{a.value<V.value-1?a.value++:C()},1e3-z.value)},C=()=>{L.value=!1,I&&(clearInterval(I),I=null)},ee=()=>{C(),a.value>0&&a.value--},te=()=>{C(),a.value<V.value-1&&a.value++},le=()=>{C(),a.value=0},H=()=>{C(),Y()},se=(r,t)=>{if(!h.value.length)return r===0||t===0?"#f0f0f0":"white";const c=h.value[a.value].highlight.find(o=>o.i===r&&o.j===t);return c?c.color:r===0||t===0?"#f0f0f0":"white"},ne=Z(()=>{var r;return((r=h.value[a.value])==null?void 0:r.description)||""}),P=Z(()=>{var r,t;return((t=(r=h.value[a.value])==null?void 0:r.lcs)==null?void 0:t.join(""))||""});return re(()=>{E.value=oe.drawGrid(R,j,q,i),Y()}),(r,t)=>{const x=b("v-line"),c=b("v-text"),o=b("v-rect"),u=b("v-layer"),N=b("v-stage"),d=b("el-input"),f=b("el-slider"),m=b("el-button");return p(),_("div",de,[n("div",ce,[n("div",fe,[n("div",null,[n("div",ge,[t[4]||(t[4]=n("div",{class:"bg-gray"},"探索最长公共子序列(LCS)算法",-1)),n("div",pe,[v(ie,{enableDrawing:U.value,"onUpdate:enableDrawing":t[0]||(t[0]=l=>U.value=l),stageRef:G.value,drawingLayerRef:T.value},null,8,["enableDrawing","stageRef","drawingLayerRef"])])]),n("div",ve,[v(N,{ref_key:"stageRef",ref:G,config:{width:R,height:j}},{default:$(()=>[v(u,null,{default:$(()=>[K.value?(p(!0),_(J,{key:0},B(E.value.lines,(l,e)=>(p(),A(x,{key:"line-"+e,config:l},null,8,["config"]))),128)):X("",!0),v(c,{config:{x:20,y:20,text:ne.value,fontSize:18,width:R-40,fill:y.text}},null,8,["config"]),P.value?(p(),A(c,{key:1,config:{x:R-200,y:20,text:`LCS: ${P.value}`,fontSize:18,fill:"#ff4d4f",fontStyle:"bold"}},null,8,["config"])):X("",!0),(p(!0),_(J,null,B(w.value.length+1,l=>(p(),A(c,{key:"col-label-"+l,config:{x:100+(l-1)*i,y:100-i,text:l===1?"Y/X":`${w.value[l-2]}[${l-1}]`,fontSize:16,width:i,height:i,align:"center",verticalAlign:"middle",fill:"#64B5F6"}},null,8,["config"]))),128)),(p(!0),_(J,null,B(S.value.length+1,l=>(p(),A(c,{key:"row-label-"+l,config:{x:100-i,y:100+(l-1)*i,text:l===1?"":`${S.value[l-2]}[${l-1}]`,fontSize:16,width:i,height:i,align:"center",verticalAlign:"middle",fill:"#FF6B6B"}},null,8,["config"]))),128)),(p(!0),_(J,null,B(S.value.length+1,l=>(p(),_(J,{key:"row-"+l},[(p(!0),_(J,null,B(w.value.length+1,e=>{var s,O,W,M;return p(),_(J,{key:"cell-"+e},[v(o,{config:{x:100+(e-1)*i,y:100+(l-1)*i,width:i,height:i,fill:se(l-1,e-1),stroke:"#ddd",strokeWidth:1}},null,8,["config"]),h.value.length&&((O=(s=h.value[a.value])==null?void 0:s.dp[l-1])==null?void 0:O[e-1])!==void 0?(p(),A(c,{key:0,config:{x:100+(e-1)*i,y:100+(l-1)*i,text:h.value[a.value].dp[l-1][e-1].toString(),fontSize:20,width:i,height:i,align:"center",verticalAlign:"middle",fill:y.text}},null,8,["config"])):X("",!0),h.value.length&&((M=(W=h.value[a.value])==null?void 0:W.directions[l-1])!=null&&M[e-1])?(p(),A(c,{key:1,config:{x:100+(e-1)*i+i-20,y:100+(l-1)*i+i-20,text:h.value[a.value].directions[l-1][e-1],fontSize:16,fill:y.arrow}},null,8,["config"])):X("",!0)],64)}),128))],64))),128))]),_:1}),v(u,{ref_key:"drawingLayerRef",ref:T},null,512)]),_:1},8,["config"])])])])]),n("div",he,[n("div",me,[t[7]||(t[7]=n("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"算法信息:",-1)),n("div",ye,[n("div",xe,[t[5]||(t[5]=n("p",{class:"text-sm text-gray-600"},"字符串 X",-1)),n("p",_e,k(S.value),1)]),n("div",be,[t[6]||(t[6]=n("p",{class:"text-sm text-gray-600"},"字符串 Y",-1)),n("p",Se,k(w.value),1)])])]),n("div",we,[t[11]||(t[11]=n("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"参数控制",-1)),n("div",Ne,[n("div",$e,[t[8]||(t[8]=n("label",{class:"block text-sm font-medium text-gray-700 mb-1",style:{width:"100px"}}," 字符串 X: ",-1)),v(d,{modelValue:S.value,"onUpdate:modelValue":t[1]||(t[1]=l=>S.value=l),placeholder:"请输入第一个字符串",onChange:H},null,8,["modelValue"])]),n("div",Je,[t[9]||(t[9]=n("label",{class:"block text-sm font-medium text-gray-700 mb-1",style:{width:"100px"}}," 字符串 Y: ",-1)),v(d,{modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=l=>w.value=l),placeholder:"请输入第二个字符串",onChange:H},null,8,["modelValue"])]),n("div",null,[n("label",ke," 动画速度: "+k(z.value),1),v(f,{modelValue:z.value,"onUpdate:modelValue":t[3]||(t[3]=l=>z.value=l),min:0,max:900,step:50},null,8,["modelValue"])]),v(m,{type:"primary",class:"w-full",onClick:Y},{default:$(()=>t[10]||(t[10]=[D(" 计算LCS ")])),_:1,__:[10]})])]),n("div",Ce,[t[15]||(t[15]=n("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"步骤控制",-1)),n("div",Oe,[v(m,{disabled:a.value===0,onClick:ee},{default:$(()=>t[12]||(t[12]=[D("上一步")])),_:1,__:[12]},8,["disabled"]),v(m,{disabled:a.value>=V.value-1,onClick:te},{default:$(()=>t[13]||(t[13]=[D("下一步")])),_:1,__:[13]},8,["disabled"]),v(m,{type:L.value?"danger":"success",onClick:Q},{default:$(()=>[D(k(L.value?"暂停":"播放"),1)]),_:1},8,["type"]),v(m,{onClick:le},{default:$(()=>t[14]||(t[14]=[D("重新开始")])),_:1,__:[14]})]),n("div",Ae," 步骤: "+k(a.value+1)+" / "+k(V.value),1)]),n("div",Le,[t[17]||(t[17]=n("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"计算结果",-1)),n("div",Ve,[t[16]||(t[16]=n("p",{class:"text-sm font-medium text-gray-700"},"最长公共子序列:",-1)),n("p",Be,k(F.value),1)])])])])}}}),Ye=ue(De,[["__scopeId","data-v-a7035bfc"]]);export{Ye as default};
