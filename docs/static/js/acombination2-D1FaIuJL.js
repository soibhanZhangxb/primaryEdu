import{D as ge}from"./delete-CgrhItlR.js";import{E as he}from"./edit-pen-ar5lyJ7a.js";import{A as be}from"./add-circle-line-C7Onahyu.js";import{R as xe}from"./refresh-BNmuwI2o.js";import{_ as ye,r as m,o as Ce,w as ke,C as u,f as b,g as v,A as t,z as a,h as i,bE as D,bF as d,B as y,a as I,bB as N,bC as U,m as L}from"./index-BbWQ1fjE.js";const we={class:"permutation-combination-app"},Ee={class:"slider-value"},Ve={class:"slider-value"},Re={class:"control-buttons"},Se={class:"result-info"},ze={key:0},Fe={key:1},Ae={class:"result-value"},De={key:0,class:"manual-selection"},Pe={class:"elements-container"},Be={class:"result-container"},We={class:"section-title"},Ie={class:"demo-hint"},Ne={key:0},Ue={key:1},Le={key:2},V=25,Z=200,Me=200,Te={__name:"acombination2",setup($e){const P=m({width:800,height:Z}),k=m({width:800,height:Me}),o=m(5),n=m(2),w=m("permutation"),M=m(1e3),c=m(!1),f=m(!1),R=m(0),B=m(0),C=m([]),F=m([]),S=m([]),E=m([]),T=()=>{const l=[],_=(P.value.width-V*2)/(o.value-1);for(let s=0;s<o.value;s++)l.push({index:s,label:String.fromCharCode(65+s),x:V+s*_,y:Z/2,selected:!1});C.value=l,E.value=[]},ee=()=>{n.value>o.value&&(n.value=o.value),H()},le=()=>{n.value>o.value&&(n.value=o.value),T(),W()},A=l=>l<=1?1:l*A(l-1),te=(l,e)=>e>l?0:A(l)/A(l-e),ae=(l,e)=>e>l?0:A(l)/(A(e)*A(l-e)),ne=(l,e)=>{const _=[],s=(x,p)=>{if(x.length===e){_.push([...x]);return}for(let g=0;g<p.length;g++){const j=[...x,p[g]],z=[...p.slice(0,g),...p.slice(g+1)];s(j,z)}};return s([],l),_},oe=(l,e)=>{const _=[],s=(x,p)=>{if(p.length===e){_.push([...p]);return}for(let g=x;g<l.length;g++)p.push(l[g]),s(g+1,p),p.pop()};return s(0,[]),_},W=()=>{const l=C.value.map(e=>({index:e.index,label:e.label}));w.value==="permutation"?(F.value=ne(l,n.value),B.value=te(o.value,n.value)):(F.value=oe(l,n.value),B.value=ae(o.value,n.value)),R.value=0,S.value=F.value[0]||[]},se=l=>{const e=C.value[l];return c.value&&!f.value?S.value.some(s=>s.index===l)?"#F56C6C":"#409EFF":e.selected?"#67C23A":"#409EFF"},ue=l=>"#F56C6C",ie=l=>{if(c.value)return;const e=C.value[l];if(e.selected){e.selected=!1;const _=E.value.findIndex(s=>s.index===l);_!==-1&&E.value.splice(_,1)}else E.value.length<n.value&&(e.selected=!0,E.value.push({index:e.index,label:e.label}));C.value=[...C.value]},re=()=>{S.value=[...E.value]},de=()=>{c.value&&!f.value||(c.value=!0,f.value=!1,R.value=0,S.value=F.value[0]||[],$())},$=()=>{!c.value||f.value||(R.value<F.value.length-1?(R.value++,S.value=F.value[R.value],setTimeout($,M.value)):c.value=!1)},ce=()=>{c.value&&!f.value&&(f.value=!0)},ve=()=>{c.value&&f.value&&(f.value=!1,$())},H=()=>{c.value=!1,f.value=!1,R.value=0,W(),C.value.forEach(l=>{l.selected=!1}),E.value=[]};return Ce(()=>{T(),W();const l=()=>{const e=window.innerWidth-400;e>500&&(P.value.width=e,k.value.width=e,T())};return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)}),ke([o,n,w],()=>{W()}),(l,e)=>{const _=u("el-header"),s=u("el-slider"),x=u("el-form-item"),p=u("el-radio"),g=u("el-radio-group"),j=u("el-form"),z=u("el-button"),q=u("el-descriptions-item"),me=u("el-descriptions"),G=u("el-card"),fe=u("el-aside"),J=u("v-rect"),K=u("v-circle"),O=u("v-text"),Q=u("v-layer"),X=u("v-stage"),_e=u("el-main"),Y=u("el-container"),pe=u("el-footer");return v(),b("div",we,[t(Y,null,{default:a(()=>[t(_,{class:"app-header"},{default:a(()=>e[4]||(e[4]=[i("div",{class:"header-content"},[i("h1",null,"数学排列组合演示工具"),i("p",null,"可视化展示排列与组合的概念和计算过程")],-1)])),_:1,__:[4]}),t(Y,{class:"main-container"},{default:a(()=>[t(fe,{width:"300px",class:"control-panel"},{default:a(()=>[t(G,{title:"控制面板",class:"control-card"},{default:a(()=>[t(j,{"label-width":"100px",class:"setting-form"},{default:a(()=>[t(x,{label:"总元素数(n)"},{default:a(()=>[t(s,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=r=>o.value=r),min:2,max:10,step:1,onChange:le},null,8,["modelValue"]),i("span",Ee,d(o.value),1)]),_:1}),t(x,{label:"选取元素数(k)"},{default:a(()=>[t(s,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=r=>n.value=r),min:1,max:Math.min(o.value,6),step:1,onChange:ee},null,8,["modelValue","max"]),i("span",Ve,d(n.value),1)]),_:1}),t(x,{label:"演示类型"},{default:a(()=>[t(g,{modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=r=>w.value=r),onChange:H},{default:a(()=>[t(p,{label:"permutation"},{default:a(()=>e[5]||(e[5]=[y("排列 (P(n,k))")])),_:1,__:[5]}),t(p,{label:"combination"},{default:a(()=>e[6]||(e[6]=[y("组合 (C(n,k))")])),_:1,__:[6]})]),_:1},8,["modelValue"])]),_:1}),t(x,{label:"动画速度"},{default:a(()=>[t(s,{modelValue:M.value,"onUpdate:modelValue":e[3]||(e[3]=r=>M.value=r),min:300,max:2e3,step:100,reverse:!0},null,8,["modelValue"])]),_:1})]),_:1}),i("div",Re,[t(z,{type:"success",icon:I(ge),disabled:c.value,class:"control-btn",onClick:de},{default:a(()=>e[7]||(e[7]=[y(" 开始演示 ")])),_:1,__:[7]},8,["icon","disabled"]),t(z,{type:"warning",icon:I(he),disabled:!c.value||f.value,class:"control-btn",onClick:ce},{default:a(()=>e[8]||(e[8]=[y(" 暂停 ")])),_:1,__:[8]},8,["icon","disabled"]),t(z,{type:"primary",icon:I(be),disabled:!c.value||!f.value,class:"control-btn",onClick:ve},{default:a(()=>e[9]||(e[9]=[y(" 继续 ")])),_:1,__:[9]},8,["icon","disabled"]),t(z,{type:"danger",icon:I(xe),class:"control-btn",onClick:H},{default:a(()=>e[10]||(e[10]=[y(" 重置 ")])),_:1,__:[10]},8,["icon"])]),i("div",Se,[t(me,{column:"1",border:""},{default:a(()=>[t(q,{label:"计算公式"},{default:a(()=>[w.value==="permutation"?(v(),b("span",ze," P("+d(o.value)+", "+d(n.value)+") = "+d(o.value)+"! / ("+d(o.value)+" - "+d(n.value)+")! ",1)):D("",!0),w.value==="combination"?(v(),b("span",Fe," C("+d(o.value)+", "+d(n.value)+") = "+d(o.value)+"! / ("+d(n.value)+"! × ("+d(o.value)+" - "+d(n.value)+")!) ",1)):D("",!0)]),_:1}),t(q,{label:"结果"},{default:a(()=>[i("span",Ae,d(B.value),1)]),_:1}),t(q,{label:"当前展示"},{default:a(()=>[i("span",null,d(R.value+1)+" / "+d(B.value),1)]),_:1})]),_:1})]),c.value?D("",!0):(v(),b("div",De,[t(G,{title:"手动选择",class:"manual-card"},{default:a(()=>[e[12]||(e[12]=i("p",{class:"manual-hint"},"点击元素进行选择/取消选择",-1)),t(z,{type:"info",disabled:E.value.length!==n.value,class:"manual-btn",onClick:re},{default:a(()=>e[11]||(e[11]=[y(" 查看结果 ")])),_:1,__:[11]},8,["disabled"])]),_:1,__:[12]})]))]),_:1})]),_:1}),t(_e,{class:"demo-container"},{default:a(()=>[t(G,{class:"demo-card"},{default:a(()=>[i("div",Pe,[e[13]||(e[13]=i("h3",{class:"section-title"},"全部元素",-1)),t(X,{config:P.value,class:"konva-stage elements-stage"},{default:a(()=>[t(Q,null,{default:a(()=>[t(J,{config:{x:0,y:0,width:P.value.width,height:P.value.height,fill:"#f9f9f9",cornerRadius:4}},null,8,["config"]),(v(!0),b(N,null,U(C.value,(r,h)=>(v(),L(K,{key:h,config:{x:r.x,y:r.y,radius:V,fill:se(h),stroke:"#333",strokeWidth:2,draggable:!c.value},onClick:He=>ie(h)},null,8,["config","onClick"]))),128)),(v(!0),b(N,null,U(C.value,(r,h)=>(v(),L(O,{key:`text-${h}`,config:{x:r.x,y:r.y,text:r.label,fontSize:16,fill:"#333",align:"center",verticalAlign:"middle"}},null,8,["config"]))),128))]),_:1})]),_:1},8,["config"])]),i("div",Be,[i("h3",We,d(w.value==="permutation"?"排列结果":"组合结果"),1),t(X,{config:k.value,class:"konva-stage result-stage"},{default:a(()=>[t(Q,null,{default:a(()=>[t(J,{config:{x:0,y:0,width:k.value.width,height:k.value.height,fill:"#f9f9f9",cornerRadius:4}},null,8,["config"]),(v(!0),b(N,null,U(S.value,(r,h)=>(v(),L(K,{key:h,config:{x:k.value.width/2-(n.value*(V*2+10)-10)/2+h*(V*2+10),y:k.value.height/2,radius:V,fill:ue(r.index),stroke:"#333",strokeWidth:2}},null,8,["config"]))),128)),(v(!0),b(N,null,U(S.value,(r,h)=>(v(),L(O,{key:`result-text-${h}`,config:{x:k.value.width/2-(n.value*(V*2+10)-10)/2+h*(V*2+10),y:k.value.height/2,text:r.label,fontSize:16,fill:"#333",align:"center",verticalAlign:"middle"}},null,8,["config"]))),128))]),_:1})]),_:1},8,["config"])]),i("div",Ie,[c.value?D("",!0):(v(),b("p",Ne,e[14]||(e[14]=[i("i",{class:"el-icon-info"},null,-1),y(' 提示：选择演示类型和参数，点击"开始演示"观看动画，或手动选择元素 ')]))),c.value&&!f.value?(v(),b("p",Ue,[e[15]||(e[15]=i("i",{class:"el-icon-loading"},null,-1)),y(" 正在演示"+d(w.value==="permutation"?"排列":"组合")+"过程... ",1)])):D("",!0),f.value?(v(),b("p",Le,e[16]||(e[16]=[i("i",{class:"el-icon-pause"},null,-1),y(' 演示已暂停，点击"继续"继续观看 ')]))):D("",!0)])]),_:1})]),_:1})]),_:1}),t(pe,{class:"app-footer"},{default:a(()=>e[17]||(e[17]=[i("p",null,"数学排列组合演示工具 © 2023",-1)])),_:1,__:[17]})]),_:1})])}}},Oe=ye(Te,[["__scopeId","data-v-42acbbe8"]]);export{Oe as default};
