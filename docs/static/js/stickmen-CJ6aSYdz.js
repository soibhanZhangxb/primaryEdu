import{d as re,r as L,y as q,o as ne,l as se,f as u,g,h as f,A as l,z as v,C as a,bB as y,bC as ge,m as p,bE as M,B,bF as de,cx as ce,_ as he}from"./index-Dks_UUQM.js";import{_ as ae}from"./KTextWithBg.vue_vue_type_script_setup_true_lang-CCnIrzBK.js";import ue from"./DrawingTool-Cba_syAv.js";const h=[];for(let n=0;n<256;++n)h.push((n+256).toString(16).slice(1));function fe(n,d=0){return(h[n[d+0]]+h[n[d+1]]+h[n[d+2]]+h[n[d+3]]+"-"+h[n[d+4]]+h[n[d+5]]+"-"+h[n[d+6]]+h[n[d+7]]+"-"+h[n[d+8]]+h[n[d+9]]+"-"+h[n[d+10]]+h[n[d+11]]+h[n[d+12]]+h[n[d+13]]+h[n[d+14]]+h[n[d+15]]).toLowerCase()}let X;const ye=new Uint8Array(16);function pe(){if(!X){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");X=crypto.getRandomValues.bind(crypto)}return X(ye)}const ke=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),$={randomUUID:ke};function _e(n,d,U){var x,w,R;if($.randomUUID&&!n)return $.randomUUID();n=n||{};const k=(R=(w=n.random)!=null?w:(x=n.rng)==null?void 0:x.call(n))!=null?R:pe();if(k.length<16)throw new Error("Random bytes length must be >= 16");return k[6]=k[6]&15|64,k[8]=k[8]&63|128,fe(k)}const be={class:"main-container"},ve={class:"content-wrapper"},Le={class:"main-content"},Re={class:"p-2 flex justify-between items-center border-left-blue"},Me={class:"flex gap-2"},We={class:"relative"},xe={class:"sidebar"},we={class:"controls"},Se={class:"flex justify-between items-center"},Te={class:"inline-block"},Ae={class:"mt-10"},Ce={class:"flex justify-between items-center mb-2"},Fe=re({__name:"stickmen",setup(n){const d=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F06292","#7986CB","#9575CD","#64B5F6","#4DB6AC","#81C784","#FFD54F"],U=["#fff","#ffe0b2","#ffccbc","#d1c4e9","#b3e5fc","#b2dfdb","#c8e6c9","#ffecb3"],k=L(null),x=L(!1),w=L(null),R=L({x:0,y:0}),_=q({width:900,height:560}),c=q([]),E=L(5),F=L(null),S=L(!1),V=L([]),D=L(400),z=()=>{const o={head:["circle","square","ellipse","triangle"],face:["normal","happy","angry"],arm:["straight","bent","wave"],leg:["line","arrow","double-arrow","lightning"],accessory:["none","hat","glasses"],animation:["walk","run","bounce","dance","float"]},i=o.head[Math.floor(Math.random()*o.head.length)],t=15+Math.random()*10;let r=150+Math.random()*(_.width-300),s=D.value;return{isHovered:!1,id:_e(),x:r,y:s,originalX:r,originalY:s,rotation:Math.random()*10-5,color:d[Math.floor(Math.random()*d.length)],headType:i,headColor:U[Math.floor(Math.random()*U.length)],headRadius:t,faceType:o.face[Math.floor(Math.random()*o.face.length)],bodyLength:40+Math.random()*30,bodyWidth:2+Math.random()*2,armType:o.arm[Math.floor(Math.random()*o.arm.length)],armLength:25+Math.random()*20,armWidth:2+Math.random()*2,armY:10+Math.random()*10,legType:o.leg[Math.floor(Math.random()*o.leg.length)],legLength:30+Math.random()*20,legWidth:2+Math.random()*2,legScale:{left:1,right:1},legAngle:{left:0,right:0},accessory:o.accessory[Math.floor(Math.random()*o.accessory.length)],animationType:o.animation[Math.floor(Math.random()*o.animation.length)]}},N=()=>{if(c.length>=15){ce("最多只能添加15个火柴人",{type:"warning"});return}c.push(z())},J=()=>{I(),c.length=0;for(let o=0;o<3;o++)N()},G=(o,i)=>{if(o.x<-50||o.x>_.width+50){c.splice(i,1);return}R.value={x:Math.round(o.x),y:Math.round(o.y)};let t=Math.min(o.y,D.value-(c[i].animationType==="float"?30:0));return t=t>30?t:30,c[i].originalX=c[i].x=o.x,c[i].originalY=c[i].y=t,{x:o.x,y:t}},K=o=>{var r;if(o>=c.length)return;c[o].isHovered=!0;const i=(r=V.value[o])==null?void 0:r.getNode();if(!i)return;const t=i.getStage();t!=null&&t.content&&(t.content.style.cursor="pointer")},O=o=>{var r;if(o>=c.length)return;c[o].isHovered=!1;const i=(r=V.value[o])==null?void 0:r.getNode();if(!i)return;const t=i.getStage();t!=null&&t.content&&(t.content.style.cursor="default")},Q=()=>{S.value||(c.forEach(o=>{o.originalX=o.x,o.originalY=o.y}),S.value=!0,H())},H=()=>{if(!S.value)return;const o=Date.now(),i=200-E.value*15;c.forEach((t,r)=>{const s=o/(i*(.8+Math.random()*.4)),T=t.originalX,A=t.originalY;switch(t.animationType){case"walk":t.legAngle.left=Math.sin(s)*20,t.legAngle.right=-t.legAngle.left,t.legScale.left=1+Math.sin(s)*.2,t.legScale.right=1-Math.sin(s)*.2,t.x=T+Math.cos(s)*.5;break;case"run":t.legAngle.left=Math.sin(s*2)*30,t.legAngle.right=-t.legAngle.left,t.legScale.left=1.2+Math.sin(s*2)*.3,t.legScale.right=1.2-Math.sin(s*2)*.3,t.x=T+Math.cos(s*2)*1.5;break;case"bounce":const b=Math.abs(Math.sin(s));t.legScale.left=.8+b*.4,t.legScale.right=.8+b*.4,t.y=A-b*30;break;case"dance":t.legAngle.left=Math.sin(s)*45,t.legAngle.right=Math.cos(s)*45,t.legScale.left=1+Math.sin(s*1.5)*.3,t.legScale.right=1+Math.cos(s*1.5)*.3,t.rotation=Math.sin(s/2)*10;break;case"float":t.y=A-50+Math.sin(s/2)*30,t.rotation=Math.sin(s/3)*5,t.legScale.left=1+Math.sin(s)*.1,t.legScale.right=1+Math.cos(s)*.1;break}t.x<50&&(t.x=50),t.x>_.width-50&&(t.x=_.width-50),t.y<50&&(t.y=50),t.y>_.height-50&&(t.y=_.height-50)}),F.value=requestAnimationFrame(H)},I=()=>{S.value&&(S.value=!1,F.value&&(cancelAnimationFrame(F.value),F.value=null),c.forEach(o=>{o.legScale.left=1,o.legScale.right=1,o.legAngle.left=0,o.legAngle.right=0,o.rotation=0}))};return ne(()=>{var i;const o=(i=k.value)==null?void 0:i.getStage();o&&o.on("mousemove",t=>{const r=o.getPointerPosition();r&&(R.value={x:Math.round(r.x),y:Math.round(r.y)})});for(let t=0;t<3;t++)N()}),se(()=>{I()}),(o,i)=>{const t=a("v-rect"),r=a("v-line"),s=a("v-circle"),T=a("v-RegularPolygon"),A=a("v-ellipse"),b=a("v-arrow"),Z=a("v-arc"),m=a("v-tag"),ee=a("v-text"),te=a("v-label"),oe=a("v-group"),P=a("v-layer"),le=a("v-stage"),Y=a("el-button"),j=a("el-button-group"),ie=a("el-slider");return g(),u("div",be,[f("div",ve,[f("div",Le,[f("div",Re,[i[2]||(i[2]=f("div",{class:"bg-gray"},"探索排列组合",-1)),f("div",Me,[l(ue,{enableDrawing:x.value,"onUpdate:enableDrawing":i[0]||(i[0]=e=>x.value=e),stageRef:k.value,drawingLayerRef:w.value},null,8,["enableDrawing","stageRef","drawingLayerRef"])])]),f("div",We,[l(le,{ref_key:"stageRef",ref:k,config:_},{default:v(()=>[l(P,{ref:"layer"},{default:v(()=>[l(t,{config:{x:0,y:0,width:_.width,height:_.height,fill:"#f5f7fa"}},null,8,["config"]),l(ae,{text:"坐标: ( "+R.value.x+", "+R.value.y+" )",x:2,y:10,fontSize:16,"bg-color":"#333333bb","text-color":"white","corner-radius":8},null,8,["text"]),l(r,{config:{points:[0,D.value+80,_.width,D.value+80],stroke:"#909399",strokeWidth:2,dash:[10,5]}},null,8,["config"]),(g(!0),u(y,null,ge(c,(e,C)=>(g(),p(oe,{key:e.id,ref_for:!0,ref:W=>{W&&(V.value[C]=W)},config:{x:e.x,y:e.y,draggable:!0,dragBoundFunc:W=>G(W,C),rotation:e.rotation},onMouseenter:W=>K(C),onMouseleave:W=>O(C)},{default:v(()=>[e.isHovered?(g(),u(y,{key:0},[e.headType==="circle"?(g(),p(s,{key:0,config:{x:0,y:-e.headRadius,radius:e.headRadius+5,fill:"rgba(255, 255, 0, 1)",stroke:"#FFD700",strokeWidth:2,dash:[5,5],listening:!1}},null,8,["config"])):e.headType==="square"?(g(),p(t,{key:1,config:{x:-e.headRadius-4,y:-e.headRadius*2-4,width:e.headRadius*2+8,height:e.headRadius*2+8,fill:"rgba(255, 255, 0, 1)",stroke:"#FFD700",strokeWidth:2,cornerRadius:5,dash:[5,5],listening:!1}},null,8,["config"])):e.headType==="triangle"?(g(),p(T,{key:2,config:{x:0,y:-e.headRadius,sides:3,radius:e.headRadius*2+9,fill:"rgba(255, 255, 0, 1)",stroke:"#FFD700",strokeWidth:2,cornerRadius:5,dash:[5,5],listening:!1}},null,8,["config"])):e.headType==="ellipse"?(g(),p(A,{key:3,config:{x:0,y:-e.headRadius,radiusX:e.headRadius*1.5+5,radiusY:e.headRadius*.8+5,fill:"rgba(255, 255, 0, 1)",stroke:"#FFD700",strokeWidth:2,cornerRadius:5,dash:[5,5],listening:!1}},null,8,["config"])):M("",!0)],64)):M("",!0),e.headType==="circle"?(g(),p(s,{key:1,config:{x:0,y:-e.headRadius,radius:e.headRadius,fill:e.headColor,stroke:e.color,strokeWidth:2}},null,8,["config"])):e.headType==="square"?(g(),p(t,{key:2,config:{x:-e.headRadius,y:-e.headRadius*2,width:e.headRadius*2,height:e.headRadius*2,fill:e.headColor,stroke:e.color,strokeWidth:2,cornerRadius:5}},null,8,["config"])):e.headType==="triangle"?(g(),p(T,{key:3,config:{x:0,y:-e.headRadius,sides:3,radius:e.headRadius*2,fill:e.headColor,stroke:e.color,strokeWidth:2,cornerRadius:5}},null,8,["config"])):e.headType==="ellipse"?(g(),p(A,{key:4,config:{x:0,y:-e.headRadius,radiusX:e.headRadius*1.5,radiusY:e.headRadius*.8,fill:e.headColor,stroke:e.color,strokeWidth:2,cornerRadius:5}},null,8,["config"])):M("",!0),l(r,{config:{points:[0,0,0,e.bodyLength],stroke:e.color,strokeWidth:e.bodyWidth}},null,8,["config"]),e.armType==="straight"?(g(),p(r,{key:5,config:{points:[-e.armLength,e.armY,e.armLength,e.armY],stroke:e.color,strokeWidth:e.armWidth}},null,8,["config"])):e.armType==="bent"?(g(),u(y,{key:6},[l(r,{config:{points:[-e.armLength/2,e.armY-10,-e.armLength,e.armY],stroke:e.color,strokeWidth:e.armWidth}},null,8,["config"]),l(r,{config:{points:[e.armLength/2,e.armY-10,e.armLength,e.armY],stroke:e.color,strokeWidth:e.armWidth}},null,8,["config"])],64)):e.armType==="wave"?(g(),u(y,{key:7},[l(r,{config:{points:[-e.armLength/3,e.armY-5,-e.armLength*2/3,e.armY+5,-e.armLength,e.armY],stroke:e.color,strokeWidth:e.armWidth,tension:.5}},null,8,["config"]),l(r,{config:{points:[e.armLength/3,e.armY-5,e.armLength*2/3,e.armY+5,e.armLength,e.armY],stroke:e.color,strokeWidth:e.armWidth,tension:.5}},null,8,["config"])],64)):M("",!0),e.legType==="line"?(g(),u(y,{key:8},[l(r,{config:{points:[0,e.bodyLength,-e.legLength*e.legScale.left,e.bodyLength+e.legLength],stroke:e.color,strokeWidth:e.legWidth}},null,8,["config"]),l(r,{config:{points:[0,e.bodyLength,e.legLength*e.legScale.right,e.bodyLength+e.legLength],stroke:e.color,strokeWidth:e.legWidth}},null,8,["config"])],64)):e.legType==="arrow"?(g(),u(y,{key:9},[l(b,{config:{points:[0,e.bodyLength,-e.legLength*e.legScale.left,e.bodyLength+e.legLength],pointerLength:10,pointerWidth:8,fill:e.color,stroke:e.color,strokeWidth:e.legWidth}},null,8,["config"]),l(b,{config:{points:[0,e.bodyLength,e.legLength*e.legScale.right,e.bodyLength+e.legLength],pointerLength:10,pointerWidth:8,fill:e.color,stroke:e.color,strokeWidth:e.legWidth}},null,8,["config"])],64)):e.legType==="double-arrow"?(g(),u(y,{key:10},[l(b,{config:{points:[0,e.bodyLength,-e.legLength*e.legScale.left,e.bodyLength+e.legLength],pointerLength:10,pointerWidth:8,fill:e.color,stroke:e.color,strokeWidth:e.legWidth,pointerAtBeginning:!0,pointerAtEnding:!0}},null,8,["config"]),l(b,{config:{points:[0,e.bodyLength,e.legLength*e.legScale.right,e.bodyLength+e.legLength],pointerLength:10,pointerWidth:8,fill:e.color,stroke:e.color,strokeWidth:e.legWidth,pointerAtBeginning:!0,pointerAtEnding:!0}},null,8,["config"])],64)):e.legType==="lightning"?(g(),u(y,{key:11},[l(r,{config:{points:[0,e.bodyLength,-e.legLength/2*e.legScale.left,e.bodyLength+e.legLength/2,-e.legLength*e.legScale.left,e.bodyLength+e.legLength],stroke:e.color,strokeWidth:e.legWidth,lineJoin:"bevel"}},null,8,["config"]),l(r,{config:{points:[0,e.bodyLength,e.legLength/2*e.legScale.right,e.bodyLength+e.legLength/2,e.legLength*e.legScale.right,e.bodyLength+e.legLength],stroke:e.color,strokeWidth:e.legWidth,lineJoin:"bevel"}},null,8,["config"]),l(b,{config:{points:[-e.legLength*e.legScale.left,e.bodyLength+e.legLength,-e.legLength*e.legScale.left-10,e.bodyLength+e.legLength+10],pointerLength:8,pointerWidth:6,fill:e.color,stroke:e.color,strokeWidth:2}},null,8,["config"]),l(b,{config:{points:[e.legLength*e.legScale.right,e.bodyLength+e.legLength,e.legLength*e.legScale.right+10,e.bodyLength+e.legLength+10],pointerLength:8,pointerWidth:6,fill:e.color,stroke:e.color,strokeWidth:2}},null,8,["config"])],64)):M("",!0),e.faceType==="normal"?(g(),u(y,{key:12},[l(s,{config:{x:-8,y:-e.headRadius-5,radius:3,fill:"#333"}},null,8,["config"]),l(s,{config:{x:8,y:-e.headRadius-5,radius:3,fill:"#333"}},null,8,["config"]),l(r,{config:{points:[-8,-e.headRadius+5,8,-e.headRadius+5],stroke:"#333",strokeWidth:2,lineCap:"round"}},null,8,["config"])],64)):e.faceType==="happy"?(g(),u(y,{key:13},[l(s,{config:{x:-8,y:-e.headRadius-5,radius:3,fill:"#333"}},null,8,["config"]),l(s,{config:{x:8,y:-e.headRadius-5,radius:3,fill:"#333"}},null,8,["config"]),l(Z,{config:{x:0,y:-e.headRadius+5,innerRadius:0,outerRadius:8,angle:180,rotation:0,fill:"transparent",stroke:"#333",strokeWidth:2}},null,8,["config"])],64)):e.faceType==="angry"?(g(),u(y,{key:14},[l(r,{config:{points:[-12,-e.headRadius-8,-4,-e.headRadius-2],stroke:"#333",strokeWidth:2}},null,8,["config"]),l(r,{config:{points:[12,-e.headRadius-8,4,-e.headRadius-2],stroke:"#333",strokeWidth:2}},null,8,["config"]),l(r,{config:{points:[-8,-e.headRadius+5,0,-e.headRadius+2,8,-e.headRadius+5],stroke:"#333",strokeWidth:2,tension:.5}},null,8,["config"])],64)):M("",!0),e.accessory==="hat"?(g(),p(t,{key:15,config:{x:-e.headRadius-5,y:-e.headRadius*2-10,width:e.headRadius*2+10,height:10,fill:e.color,stroke:"#333",strokeWidth:1,cornerRadius:3}},null,8,["config"])):e.accessory==="glasses"?(g(),u(y,{key:16},[l(t,{config:{x:-15,y:-e.headRadius-8,width:10,height:5,fill:"rgba(200, 200, 255, 0.5)",stroke:"#333",strokeWidth:1}},null,8,["config"]),l(t,{config:{x:5,y:-e.headRadius-8,width:10,height:5,fill:"rgba(200, 200, 255, 0.5)",stroke:"#333",strokeWidth:1}},null,8,["config"]),l(r,{config:{points:[-5,-e.headRadius-5,5,-e.headRadius-5],stroke:"#333",strokeWidth:1}},null,8,["config"])],64)):M("",!0),l(te,{config:{x:e.headRadius,y:e.bodyLength/2,opacity:.75}},{default:v(()=>[l(m,{config:{fill:e.color,cornerRadius:10}},null,8,["config"]),l(ee,{config:{text:`小${C+1}`,fontFamily:"Calibri",fontSize:14,padding:5,fill:"black"}},null,8,["config"])]),_:2},1032,["config"])]),_:2},1032,["config","onMouseenter","onMouseleave"]))),128))]),_:1},512),l(P,{ref_key:"drawingLayerRef",ref:w},null,512)]),_:1},8,["config"])])]),f("div",xe,[f("div",we,[f("div",Se,[l(j,null,{default:v(()=>[l(Y,{type:"success",onClick:N},{default:v(()=>i[3]||(i[3]=[B("添加")])),_:1,__:[3]}),l(Y,{type:"primary",onClick:J},{default:v(()=>i[4]||(i[4]=[B("重置")])),_:1,__:[4]})]),_:1}),f("div",Te,"（"+de(c==null?void 0:c.length)+" 人）",1)]),f("div",Ae,[f("div",Ce,[l(j,null,{default:v(()=>[l(Y,{type:"primary",onClick:Q},{default:v(()=>i[5]||(i[5]=[B("开始")])),_:1,__:[5]}),l(Y,{onClick:I},{default:v(()=>i[6]||(i[6]=[B("停止")])),_:1,__:[6]})]),_:1}),i[7]||(i[7]=f("div",{class:"font-bold"},"动画速度",-1))]),l(ie,{modelValue:E.value,"onUpdate:modelValue":i[1]||(i[1]=e=>E.value=e),min:1,max:10,label:"速度"},null,8,["modelValue"])])])])])])}}}),Ue=he(Fe,[["__scopeId","data-v-f0509d7c"]]);export{Ue as default};
