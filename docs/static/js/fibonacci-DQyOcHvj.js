import{d as q,a as r,p as K,m as O,k as _,e as v,g as t,f as p,w as y,h,F as k,l as M,z as Q,$ as Z,b as S,t as j,j as z,_ as ee}from"./index-DtWb8qEC.js";import{D as te}from"./dutils-0Z0zhYva.js";import{_ as E}from"./KTextWithBg.vue_vue_type_script_setup_true_lang-48_gf6ZU.js";import se from"./DrawingTool-DD_faqZE.js";const oe={class:"flex flex-col md:flex-row gap-6 p-4 bg-gray-50 shadow mkonva"},le={class:"flex-1"},ne={class:"border rounded-lg overflow-hidden bg-white"},ae={class:"p-2 flex justify-between items-center border-left-blue"},ie={class:"flex gap-2"},re={class:"relative"},ce={class:"w-full md:w-80 space-y-6"},ue={class:"bg-white p-4 rounded-lg shadow border-left-blue"},de={class:"space-y-3"},fe={class:"flex items-center justify-between h-full"},me={class:"text-lg font-mono"},ge={class:"bg-white p-4 rounded-lg shadow"},ve={class:"space-y-4"},pe={class:"block text-sm font-medium text-gray-700 mb-1"},be={class:"bg-white p-4 rounded-lg shadow"},he={class:"space-y-2"},xe={class:"bg-white p-4 rounded-lg shadow"},_e={class:"result-box"},we={class:"text-lg font-mono mt-2"},F=940,A=580,H=8,ye=q({name:"NFibonacci",__name:"fibonacci",setup(ke){const P={x:F/2,y:A/2},B=r({lines:[],labels:[]}),x=r(10),V=r(!0),G=r(!1),C=r({x:0,y:0}),D=r([]),U=r([]),I=r([]),L=r([]),T=r([]),R=r([]),N=r(null),W=r(null),X=K(()=>D.value.join(", ")),$=()=>{const c=x.value,e=[0,1],a=[{text:`开始计算斐波那契数列前 ${c} 项`,timestamp:new Date().toLocaleTimeString()},{text:"F(0) = 0",timestamp:new Date().toLocaleTimeString()},{text:"F(1) = 1",timestamp:new Date().toLocaleTimeString()}];for(let l=2;l<c;l++)e[l]=e[l-1]+e[l-2],a.push({text:`F(${l}) = F(${l-1}) + F(${l-2}) = ${e[l-1]} + ${e[l-2]} = ${e[l]}`,timestamp:new Date().toLocaleTimeString()});D.value=e.slice(0,c),U.value=a,U.value.push({text:`计算完成！斐波那契数列前 ${c} 项为: ${D.value.join(", ")}`,timestamp:new Date().toLocaleTimeString()}),Y()},Y=()=>{const c=D.value;I.value=[],L.value=[],T.value=[],R.value=[];let e=P.x,a=P.y,l=0;const u=[];for(let b=2;b<c.length;b++){const w=c[b],s=w*H;let d,i;switch(l){case 0:d=e,i=a,e+=s;break;case 1:d=e-s,i=a,a+=s;break;case 2:d=e-s,i=a-s,e-=s;break;case 3:d=e,i=a-s,a-=s;break}I.value.push({x:d,y:i,width:s,height:s,fill:`hsla(${b*30%360}, 70%, 70%, 0.3)`,stroke:`hsl(${b*30%360}, 70%, 50%)`,strokeWidth:2}),T.value.push({x:d+s/2,y:i+s/2,text:w.toString(),fontSize:Math.max(12,Math.min(20,16-b)),fill:"white",align:"center",verticalAlign:"middle",fontStyle:"bold"});let f,o,m=l*90;switch(l){case 0:f=d+s,o=i;for(let n=0;n<=90;n+=5){const g=n*Math.PI/180;u.push(f-Math.cos(g)*s),u.push(o+Math.sin(g)*s)}break;case 1:f=d,o=i+s;for(let n=90;n<=180;n+=5){const g=n*Math.PI/180;u.push(f+Math.sin(g-Math.PI/2)*s),u.push(o-Math.cos(g-Math.PI/2)*s)}break;case 2:f=d,o=i;for(let n=180;n<=270;n+=5){const g=n*Math.PI/180;u.push(f+Math.cos(g)*s),u.push(o-Math.sin(g)*s)}break;case 3:f=d+s,o=i;for(let n=270;n<=360;n+=5){const g=n*Math.PI/180;u.push(f-Math.sin(g-Math.PI*1.5)*s),u.push(o+Math.cos(g-Math.PI*1.5)*s)}break}L.value.push({x:f,y:o,radius:s,stroke:`hsl(${b*30%360}, 70%, 50%)`,strokeWidth:2,angle:90,rotation:m}),l=(l+1)%4}u.length>0&&R.value.push({points:u,stroke:"#3a7bd5",strokeWidth:3,tension:.5,lineCap:"round",lineJoin:"round"})},J=()=>{x.value=10,$()};return O(()=>{var e;B.value=te.drawGrid(F,A,P,H),$();const c=(e=N.value)==null?void 0:e.getStage();c&&c.on("mousemove",a=>{const l=c.getPointerPosition();l&&(C.value={x:Math.round(l.x),y:Math.round(l.y)})})}),(c,e)=>{const a=h("v-line"),l=h("v-rect"),u=h("v-circle"),b=h("v-text"),w=h("v-layer"),s=h("v-stage"),d=h("el-slider"),i=h("el-button"),f=h("el-checkbox");return v(),_("div",oe,[t("div",le,[t("div",ne,[t("div",null,[t("div",ae,[e[3]||(e[3]=t("div",{class:"text-sm font-medium text-gray-700 bg-gray"}," 斐波那契螺旋 - 自然界中的数学之美 ",-1)),t("div",ie,[p(se,{enableDrawing:G.value,"onUpdate:enableDrawing":e[0]||(e[0]=o=>G.value=o),stageRef:N.value,drawingLayerRef:W.value},null,8,["enableDrawing","stageRef","drawingLayerRef"])])]),t("div",re,[p(s,{ref_key:"stageRef",ref:N,config:{width:F,height:A}},{default:y(()=>[p(w,null,{default:y(()=>[(v(!0),_(k,null,M(B.value.lines,(o,m)=>Q((v(),S(a,{key:"grid-"+m,config:o},null,8,["config"])),[[Z,V.value]])),128)),(v(!0),_(k,null,M(I.value,(o,m)=>(v(),S(l,{key:"rect-"+m,config:o},null,8,["config"]))),128)),(v(!0),_(k,null,M(L.value,(o,m)=>(v(),S(u,{key:"circle-"+m,config:o},null,8,["config"]))),128)),(v(!0),_(k,null,M(R.value,(o,m)=>(v(),S(a,{key:"spiral-"+m,config:o},null,8,["config"]))),128)),(v(!0),_(k,null,M(T.value,(o,m)=>(v(),S(b,{key:"text-"+m,config:o},null,8,["config"]))),128)),p(E,{text:"斐波那契螺旋",x:F-150,y:2,fontSize:16,"bg-color":"#3a7bd5bb","text-color":"white","corner-radius":8},null,8,["x"]),p(E,{text:"坐标: ( "+C.value.x+", "+C.value.y+" )",x:2,y:10,fontSize:16,"bg-color":"#333333bb","text-color":"white","corner-radius":8},null,8,["text"])]),_:1}),p(w,{ref_key:"drawingLayerRef",ref:W},null,512)]),_:1},8,["config"])])])])]),t("div",ce,[t("div",ue,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"数列信息:",-1)),t("div",de,[e[5]||(e[5]=t("div",{class:"flex items-center justify-between h-full"},[t("p",{class:"text-sm text-gray-600"},"斐波那契数列"),t("p",{class:"text-xl font-mono font-bold text-blue-600"}," F(n) = F(n-1) + F(n-2) ")],-1)),t("div",fe,[e[4]||(e[4]=t("p",{class:"text-sm text-gray-600"},"当前项数",-1)),t("p",me,j(x.value),1)])])]),t("div",ge,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"参数控制",-1)),t("div",ve,[t("div",null,[t("label",pe," 项数 n: "+j(x.value),1),p(d,{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=o=>x.value=o),min:3,max:15,step:1,"show-input":"",onChange:$},null,8,["modelValue"])]),p(i,{type:"primary",class:"w-full",onClick:$},{default:y(()=>e[7]||(e[7]=[z(" 计算 ")])),_:1,__:[7]}),p(i,{type:"info",class:"w-full",onClick:J},{default:y(()=>e[8]||(e[8]=[z(" 重置 ")])),_:1,__:[8]})])]),t("div",be,[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"显示选项",-1)),t("div",he,[p(f,{modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=o=>V.value=o)},{default:y(()=>e[10]||(e[10]=[z("显示网格")])),_:1,__:[10]},8,["modelValue"])])]),t("div",xe,[e[13]||(e[13]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"计算结果",-1)),t("div",_e,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-700"},"斐波那契数列:",-1)),t("p",we,j(X.value),1)])]),e[14]||(e[14]=t("div",{class:"bg-white p-4 rounded-lg shadow"},[t("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"斐波那契螺旋"),t("p",{class:"text-sm text-gray-600"}," 斐波那契螺旋(又称黄金螺旋)是根据斐波那契数列画出来的螺旋曲线， 在自然界中广泛存在，如鹦鹉螺的外壳、星系旋臂等。 ")],-1))])])}}}),Fe=ee(ye,[["__scopeId","data-v-c3f34c72"]]);export{Fe as default};
