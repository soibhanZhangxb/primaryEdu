var W=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var R=(t,l,o)=>l in t?W(t,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[l]=o,S=(t,l)=>{for(var o in l||(l={}))Z.call(l,o)&&R(t,o,l[o]);if(E)for(var o of E(l))ee.call(l,o)&&R(t,o,l[o]);return t},C=(t,l)=>X(t,Y(l));var B=(t,l,o)=>new Promise((d,u)=>{var p=s=>{try{r(o.next(s))}catch(h){u(h)}},c=s=>{try{r(o.throw(s))}catch(h){u(h)}},r=s=>s.done?d(s.value):Promise.resolve(s.value).then(p,c);r((o=o.apply(t,l)).next())});import{_ as ae}from"./_plugin-vue_export-helper-Dh8ZWc_F.js";import{u as le,f as F,P as oe,g as se,a as te,b as re}from"./plus-form-Fx29aNOn.js";import{d as A,r as w,cT as ne,cs as ue,k as V,a,w as de,m,g as v,dx as ie,bC as N,z as i,ch as g,cq as L,cr as U,bE as $,fO as pe,A as x,ed as z,gH as ce,B as I,bF as D,gI as fe,fS as he,eH as me,f7 as ve,f8 as be,p as ge}from"./index-4iHgqUda.js";import{o as ye}from"./orderBy-DxbZs-mg.js";var Se=A({name:"PlusSearch",__name:"index",props:{modelValue:{default:()=>({})},defaultValues:{default:()=>({})},columns:{default:()=>[]},hasFooter:{type:Boolean,default:!0},hasReset:{type:Boolean,default:!0},hasUnfold:{type:Boolean,default:!0},searchText:{default:""},resetText:{default:""},retractText:{default:""},expandText:{default:""},searchLoading:{type:Boolean,default:!1},inline:{type:Boolean,default:!0},showNumber:{default:2},labelPosition:{default:void 0},rowProps:{default:()=>({gutter:20})},colProps:{default:()=>({xs:24,sm:12,md:8,lg:8,xl:6})},needValidate:{type:Boolean,default:!1}},emits:["update:modelValue","search","change","reset","collapse"],setup(t,{expose:l,emit:o}){const d=t,u=o,{t:p}=le(),c=w(),r=w(!1),s=w({}),h=ne(),H=ue(),j=V(()=>d.needValidate?H.rules:void 0),q=F(h,se()),O=F(h,te()),G=F(h,re()),P=V(()=>{const e=d.columns.filter(n=>a(n.hideInSearch)!==!0).map(n=>C(S({},n),{hideInForm:!1})).map(n=>C(S({},n),{order:n!=null&&n.order?a(n.order):0}));return ye(e,["order"],["desc"])}),J=V(()=>d.hasUnfold&&!r.value?P.value.slice(0,d.showNumber):P.value);de(()=>d.modelValue,e=>{s.value=e},{immediate:!0});const K=(e,n)=>B(null,null,function*(){u("update:modelValue",e),u("change",e,n)}),M=()=>{u("search",s.value)},Q=()=>B(null,null,function*(){var e;(yield(e=c.value)==null?void 0:e.handleSubmit())&&u("search",s.value)}),T=V(()=>d.needValidate?Q:M),_=()=>{s.value=S({},d.defaultValues),u("update:modelValue",s.value),u("reset",s.value)},k=e=>{e.preventDefault(),r.value=!r.value,u("collapse",r.value)};return l({plusFormInstance:c,handleReset:_,handleSearch:T.value,handleUnfold:k}),(e,n)=>(v(),m(a(oe),ge({ref_key:"plusFormInstance",ref:c},e.$attrs,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=y=>s.value=y),inline:e.inline,rules:j.value,"label-position":e.labelPosition,"row-props":e.rowProps,"col-props":e.colProps,columns:J.value,class:"plus-search","has-footer":!1,onChange:K}),ie({"search-footer":i(()=>[e.hasFooter?(v(),m(a(pe),{key:0,class:"plus-search__button__wrapper",label:e.labelPosition==="top"?"placeholder":""},{default:i(()=>[g(e.$slots,"footer",{isShowUnfold:r.value,handleReset:_,handleSearch:T.value,handleUnfold:k,searchLoading:e.searchLoading},()=>[e.hasReset?(v(),m(a(z),{key:0,icon:a(ce),onClick:_},{default:i(()=>[I(D(e.resetText||a(p)("plus.search.resetText")),1)]),_:1},8,["icon"])):$("v-if",!0),x(a(z),{type:"primary",loading:e.searchLoading,icon:a(fe),onClick:T.value},{default:i(()=>[I(D(e.searchText||a(p)("plus.search.searchText")),1)]),_:1},8,["loading","icon","onClick"]),e.hasUnfold&&P.value.length>e.showNumber?(v(),m(a(he),{key:1,class:"plus-search__unfold",type:"primary",underline:!1,href:"javaScript:;",onClick:k},{default:i(()=>[I(D(r.value?e.retractText||a(p)("plus.search.retract"):e.expandText||a(p)("plus.search.expand"))+" ",1),x(a(me),null,{default:i(()=>[r.value?(v(),m(a(ve),{key:0})):(v(),m(a(be),{key:1}))]),_:1})]),_:1})):$("v-if",!0)])]),_:3},8,["label"])):$("v-if",!0)]),_:2},[N(a(q),(y,f)=>({name:f,fn:i(b=>[g(e.$slots,f,L(U(b)))])})),N(a(O),(y,f)=>({name:f,fn:i(b=>[g(e.$slots,f,L(U(b)))])})),N(a(G),(y,f)=>({name:f,fn:i(b=>[g(e.$slots,f,L(U(b)))])})),e.$slots["tooltip-icon"]?{name:"tooltip-icon",fn:i(()=>[g(e.$slots,"tooltip-icon")]),key:"0"}:void 0]),1040,["modelValue","inline","rules","label-position","row-props","col-props","columns"]))}}),Ve=ae(Se,[["__file","index.vue"]]);const we=Ve,Be=A({__name:"search",setup(t){const l=w({status:"0",time:new Date().toString()}),o=[{label:"名称",prop:"name",valueType:"copy",tooltip:"名称最多显示6个字符"},{label:"状态",prop:"status",valueType:"select",options:[{label:"未解决",value:"0",color:"red"},{label:"已解决",value:"1",color:"blue"},{label:"解决中",value:"2",color:"yellow"},{label:"失败",value:"3",color:"red"}]},{label:"时间",prop:"time",valueType:"date-picker"},{label:"数量",prop:"number",valueType:"input-number",fieldProps:{precision:2,step:2}},{label:"城市",prop:"city",valueType:"cascader",options:[{value:"0",label:"陕西",children:[{value:"0-0",label:"西安",children:[{value:"0-0-0",label:"新城区"},{value:"0-0-1",label:"高新区"},{value:"0-0-2",label:"灞桥区"}]}]},{value:"1",label:"山西",children:[{value:"1-0",label:"太原",children:[{value:"1-0-0",label:"小店区"},{value:"1-0-1",label:"古交市"},{value:"1-0-2",label:"万柏林区"}]}]}]},{label:"地区",prop:"place",tooltip:"请精确到门牌号",fieldProps:{placeholder:"请精确到门牌号"}},{label:"到期时间",prop:"endTime",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"请选择",endPlaceholder:"请选择"}},{label:"奖励",prop:"price"},{label:"提成",prop:"percentage"}],d=c=>{},u=c=>{},p=()=>{};return(c,r)=>(v(),m(a(we),{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=s=>l.value=s),columns:o,"show-number":2,"label-width":"80","label-position":"right",onChange:d,onSearch:u,onReset:p},null,8,["modelValue"]))}});export{Be as _};
