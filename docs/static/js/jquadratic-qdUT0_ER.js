import{d as re,r as v,k as m,o as ie,w as de,f as C,g as x,h as d,A as t,z as s,C as p,m as y,bE as L,bB as E,bC as I,B as _,cu as fe,a as U,_ as ve}from"./index-Dks_UUQM.js";import{D as ce}from"./dutils-CTazb8Sy.js";import{_ as X}from"./KTextWithBg.vue_vue_type_script_setup_true_lang-CCnIrzBK.js";import xe from"./DrawingTool-Cba_syAv.js";import{s as D}from"./index-BxBGDVG2.js";import{f as me}from"./myUtils-CO6ajrRf.js";import{p as pe}from"./functional-gsVEwKX3.js";const be={class:"flex flex-col md:flex-row gap-6 p-4 bg-gray-50 shadow mkonva"},ge={class:"flex-1"},ye={class:"border rounded-lg overflow-hidden bg-white"},_e={class:"p-2 flex justify-between items-center border-left-blue"},we={class:"flex gap-2"},he={class:"relative"},Ve={class:"w-full md:w-120 space-y-2"},$e={class:"bg-white p-4 rounded-lg shadow border-left-blue"},ke={class:"bg-white p-4 rounded-lg shadow border-left-blue"},Se={class:"bg-white p-4 rounded-lg shadow border-left-blue"},ze={class:"space-y-2"},f=40,Me="$$x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}$$",Ce="$$({-b \\over 2a}， {{4ac - b^2} \\over 4a})$$",Ue="$${-b \\over 2a}$$",De="$${c \\over a}$$",Fe="$${-b \\over a}$$",Re=re({name:"JQuadratic",__name:"jquadratic",setup(qe){const $={width:940,height:680};let n={x:$.width/2,y:$.height/2};const A=v({lines:[],labels:[]}),r=v(1),i=v(2),c=v(-2),w=v("x² + 2x - 2"),F=v(!0),W=v(!0),k=v(!0),j=v(!0),R=v(!0),q=v(!0),K=v(!1),G=v({x:0,y:0}),N=v(null),O=v(null),le=m(()=>{let l="";const{value:e}=r,{value:a}=i,{value:u}=c;if(e===0){if(a===0)return`y = ${u}`;if(Math.abs(a)===1?l+=a>0?"x":"-x":l+=`${a}x`,u!==0){const g=u>0?" + ":" - ";l+=`${g}${Math.abs(u)}`}return l}if(Math.abs(e)===1?l+=e>0?"x²":"-x²":l+=`${e}x²`,a!==0){const g=a>0?" + ":" - ";Math.abs(a)===1?l+=`${g}x`:l+=`${g}${Math.abs(a)}x`}if(u!==0){const g=u>0?" + ":" - ";l+=`${g}${Math.abs(u)}`}return l}),te=m(()=>i.value*i.value-4*r.value*c.value),h=m(()=>{const l=te.value;if(l<0)return[];if(r.value===0)return i.value===0?[]:[-c.value/i.value];const e=Math.sqrt(l),a=(-i.value-e)/(2*r.value),u=(-i.value+e)/(2*r.value);return l===0?[a]:[a,u]}),B=m(()=>{if(r.value===0)return null;const l=-i.value/(2*r.value),e=r.value*l*l+i.value*l+c.value;return{x:l,y:e}}),Q=m(()=>r.value===0?null:-i.value/(2*r.value)),T=m(()=>{if(!k.value||r.value===0)return null;const l=[];for(let e=-n.x/f;e<=n.x/f;e+=.1){const a=e,u=r.value*a*a+i.value*a+c.value;u>=-n.y/f&&u<=n.y/f&&(l.push(n.x+a*f),l.push(n.y-u*f))}return{points:l,stroke:"#3a7bd5",strokeWidth:3,tension:.2}}),Y=m(()=>{if(!W.value||!k.value||Q.value===null)return null;const l=n.x+Q.value*f;return{points:[l,0,l,$.height],stroke:"#ff6b6b",strokeWidth:2,dash:[5,5]}}),S=m(()=>{if(!F.value||!k.value||B.value===null)return null;const{x:l,y:e}=B.value;return{x:n.x+l*f,y:n.y-e*f,text:`顶点: (${l.toFixed(2)}, ${e.toFixed(2)})`,fontSize:16,fill:"#ff6b6b"}}),z=m(()=>!q.value||!k.value?null:{x:n.x+10,y:n.y-c.value*f-10,text:`y截距: ${c.value.toFixed(2)}`,fontSize:16,fill:"#4ecdc4"}),oe=m(()=>{if(!k.value)return[];const l=[];if(q.value&&l.push({x:n.x,y:n.y-c.value*f,radius:6,fill:"#4ecdc4",stroke:"#fff",strokeWidth:2}),R.value&&h.value.forEach(e=>{l.push({x:n.x+e*f,y:n.y,radius:6,fill:"#ffa502",stroke:"#fff",strokeWidth:2})}),F.value&&B.value){const{x:e,y:a}=B.value;l.push({x:n.x+e*f,y:n.y-a*f,radius:6,fill:"#ff6b6b",stroke:"#fff",strokeWidth:2})}return l}),ae=m(()=>{if(!R.value||!k.value||h.value.length===0)return[];let l=[0,0];if(h.value.length==2){let e=h.value[0].toFixed(5),a=h.value[1].toFixed(5);l=e>a?[0,-70]:[-70,0]}return h.value.map((e,a)=>({x:n.x+e*f+l[a],y:n.y+20,text:`${e.toFixed(2)}`,fontSize:16,fill:"#EE2A2AD1"}))}),J=()=>{let l=me(w.value);l!=w.value&&(w.value=l);let e=pe(l);r.value=e.a,i.value=e.b,c.value=e.c,w.value=e.f},H=()=>{r.value=1,i.value=2,c.value=-2};return ie(()=>{var e;A.value=ce.drawGrid($.width,$.height,n,f);const l=(e=N.value)==null?void 0:e.getStage();l&&l.on("mousemove",a=>{const u=l.getPointerPosition();u&&(G.value={x:Math.round(u.x),y:Math.round(u.y)})})}),de([r,i,c],()=>{w.value=le.value}),(l,e)=>{const a=p("v-line"),u=p("v-text"),g=p("v-circle"),Z=p("v-layer"),ne=p("v-stage"),P=p("el-slider"),b=p("el-form-item"),se=p("el-button"),ee=p("el-form"),ue=p("el-input"),M=p("el-checkbox");return x(),C("div",be,[d("div",ge,[d("div",ye,[d("div",null,[d("div",_e,[e[10]||(e[10]=d("div",{class:"text-sm font-medium text-gray-700 bg-gray"}," 探索二次函数 y = ax² + bx + c 的图像变化规律 ",-1)),d("div",we,[t(xe,{enableDrawing:K.value,"onUpdate:enableDrawing":e[0]||(e[0]=o=>K.value=o),stageRef:N.value,drawingLayerRef:O.value},null,8,["enableDrawing","stageRef","drawingLayerRef"])])]),d("div",he,[t(ne,{ref_key:"stageRef",ref:N,config:$},{default:s(()=>[t(Z,null,{default:s(()=>[(x(!0),C(E,null,I(A.value.lines,(o,V)=>(x(),y(a,{key:"grid-"+V,config:o},null,8,["config"]))),128)),(x(!0),C(E,null,I(A.value.labels,(o,V)=>(x(),y(u,{key:"axe-label-"+V,config:o},null,8,["config"]))),128)),T.value?(x(),y(a,{key:0,config:T.value},null,8,["config"])):L("",!0),Y.value?(x(),y(a,{key:1,config:Y.value},null,8,["config"])):L("",!0),S.value?(x(),y(X,{key:2,text:S.value.text,x:S.value.x+10,y:S.value.y-10,fontSize:S.value.fontSize,"bg-color":"#ff6b6b88","text-color":"white","corner-radius":8},null,8,["text","x","y","fontSize"])):L("",!0),z.value?(x(),y(X,{key:3,text:z.value.text,x:z.value.x,y:z.value.y,fontSize:z.value.fontSize,"bg-color":"#10b98188","text-color":"white","corner-radius":8},null,8,["text","x","y","fontSize"])):L("",!0),(x(!0),C(E,null,I(ae.value,(o,V)=>(x(),y(X,{key:"x-intercept-"+V,text:o.text,x:o.x+10,y:o.y,fontSize:o.fontSize,"bg-color":"#ffa50288","text-color":"white","corner-radius":8},null,8,["text","x","y","fontSize"]))),128)),(x(!0),C(E,null,I(oe.value,(o,V)=>(x(),y(g,{key:"point-"+V,config:o},null,8,["config"]))),128)),t(X,{text:"坐标: ( "+G.value.x+", "+G.value.y+" )",x:2,y:10,fontSize:16,"bg-color":"#333333bb","text-color":"white","corner-radius":8},null,8,["text"])]),_:1}),t(Z,{ref_key:"drawingLayerRef",ref:O},null,512)]),_:1},512)])])])]),d("div",Ve,[d("div",$e,[e[12]||(e[12]=d("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"参数控制",-1)),t(ee,null,{default:s(()=>[t(b,{label:"a",class:""},{default:s(()=>[t(P,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=o=>r.value=o),min:-5,max:5,step:1e-4,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]),_:1}),t(b,{label:"b",class:""},{default:s(()=>[t(P,{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=o=>i.value=o),min:-10,max:10,step:1e-4,"show-input":!0,"show-input-controls":!1},null,8,["modelValue"])]),_:1}),t(b,{label:"c",class:""},{default:s(()=>[t(P,{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=o=>c.value=o),min:-10,max:10,step:1e-4,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]),_:1}),t(b,{label:"",class:""},{default:s(()=>[t(se,{type:"info",class:"w-full",onClick:H},{default:s(()=>e[11]||(e[11]=[_(" 重置 ")])),_:1,__:[11]})]),_:1})]),_:1})]),d("div",ke,[e[16]||(e[16]=d("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"方程信息:",-1)),t(ee,{class:"right-forms","label-position":"right","label-width":"100"},{default:s(()=>[t(b,{label:"y = ",class:"",style:{"margin-bottom":"10px !important"}},{default:s(()=>[t(ue,{modelValue:w.value,"onUpdate:modelValue":e[4]||(e[4]=o=>w.value=o),style:{"font-size":"21px"},onBlur:J,onClear:H,onKeyup:fe(J,["enter"])},null,8,["modelValue"])]),_:1}),t(b,{label:"判别式:",class:""},{default:s(()=>e[13]||(e[13]=[d("div",{class:"text-lg font-mono"},"△ = b² - 4ac",-1)])),_:1,__:[13]}),t(b,{label:"求根公式:",class:""},{default:s(()=>[t(U(D),{formula:Me})]),_:1}),t(b,{label:"中心对称轴:",class:""},{default:s(()=>[t(U(D),{formula:Ue})]),_:1}),t(b,{label:"顶点坐标:",class:""},{default:s(()=>[t(U(D),{formula:Ce})]),_:1}),t(b,{label:"两根:",class:""},{default:s(()=>[e[14]||(e[14]=_(" 之和：")),t(U(D),{formula:Fe}),e[15]||(e[15]=_("、乘积：")),t(U(D),{formula:De})]),_:1,__:[14,15]})]),_:1})]),d("div",Se,[e[22]||(e[22]=d("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"显示选项",-1)),d("div",ze,[t(M,{modelValue:j.value,"onUpdate:modelValue":e[5]||(e[5]=o=>j.value=o)},{default:s(()=>e[17]||(e[17]=[_("网格")])),_:1,__:[17]},8,["modelValue"]),t(M,{modelValue:F.value,"onUpdate:modelValue":e[6]||(e[6]=o=>F.value=o)},{default:s(()=>e[18]||(e[18]=[_("顶点")])),_:1,__:[18]},8,["modelValue"]),t(M,{modelValue:W.value,"onUpdate:modelValue":e[7]||(e[7]=o=>W.value=o)},{default:s(()=>e[19]||(e[19]=[_("对称轴")])),_:1,__:[19]},8,["modelValue"]),t(M,{modelValue:q.value,"onUpdate:modelValue":e[8]||(e[8]=o=>q.value=o)},{default:s(()=>e[20]||(e[20]=[_("y截距")])),_:1,__:[20]},8,["modelValue"]),t(M,{modelValue:R.value,"onUpdate:modelValue":e[9]||(e[9]=o=>R.value=o),disabled:h.value.length===0},{default:s(()=>e[21]||(e[21]=[_(" x截距 ")])),_:1,__:[21]},8,["modelValue","disabled"])])])])])}}}),Ge=ve(Re,[["__scopeId","data-v-78ac4416"]]);export{Ge as default};
