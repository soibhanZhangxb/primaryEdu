import{d as j,y as V,r as W,l as U,f as p,g as u,h as q,A as t,z as k,C as a,B as w,bB as A,bC as z,m as H,bE as S,_ as G}from"./index-4iHgqUda.js";const J={class:"multi-stick-man-container"},K={class:"controls"},O=j({__name:"jtest",setup(Q){const y=V({width:800,height:400}),s=V([{x:150,y:300,color:"#333",headRadius:20,animationType:"walk",armAngle:{left:0,right:0},legAngle:{left:0,right:0}},{x:300,y:300,color:"#45B7D1",headRadius:18,animationType:"cheer",armAngle:{left:0,right:0},legAngle:{left:0,right:0}},{x:450,y:300,color:"rgba(222,143,63,0.8)",headRadius:16,animationType:"run",armAngle:{left:0,right:0},legAngle:{left:0,right:0}},{x:600,y:300,color:"#9575CD",headRadius:22,animationType:"think",armAngle:{left:0,right:0},legAngle:{left:0,right:0}},{x:750,y:300,color:"#ff6b6b",headRadius:24,animationType:"dance",armAngle:{left:0,right:0},legAngle:{left:0,right:0}}]),c=W(5),b=W(null),m=W(!1),R=W([]),N=n=>({points:[0,-s[n].headRadius*2,0,20],stroke:s[n].color,strokeWidth:3}),v=n=>({x:0,y:-s[n].headRadius*3,radius:s[n].headRadius,fill:"#fff",stroke:s[n].color,strokeWidth:2}),I=(n,o)=>({points:o==="left"?[-30,-20,-50,0]:[30,-20,50,0],stroke:s[n].color,strokeWidth:3}),d=(n,o)=>({points:o==="left"?[0,20,-20,50]:[0,20,20,50],stroke:s[n].color,strokeWidth:3}),f=(n,o)=>({x:o==="left"?-8:8,y:-s[n].headRadius*3-5,radius:3,fill:s[n].color}),D=n=>({points:[-8,-s[n].headRadius*3+5,8,-s[n].headRadius*3+5],stroke:s[n].color,strokeWidth:2,lineCap:"round"}),F=(n,o)=>({x:n.x,y:Math.min(n.y,300-(o===4?30:0))}),E=()=>{if(!m.value)return;const n=Date.now();s.forEach((o,_)=>{switch(o.animationType){case"walk":o.legAngle.left=Math.sin(n/(200-c.value*15))*15,o.legAngle.right=-o.legAngle.left;break;case"cheer":o.armAngle.left=Math.sin(n/(300-c.value*20))*10,o.armAngle.right=o.armAngle.left;break;case"run":o.armAngle.left=Math.sin(n/(150-c.value*10))*30,o.armAngle.right=-o.armAngle.left,o.legAngle.left=-o.armAngle.left+10,o.legAngle.right=-o.legAngle.left+10;break;case"think":o.armAngle.right=Math.sin(n/(500-c.value*30))*15;break;case"dance":o.armAngle.left=Math.sin(n/(250-c.value*15))*45,o.armAngle.right=Math.cos(n/(250-c.value*15))*45,o.legAngle.left=-o.armAngle.left*.7,o.legAngle.right=-o.legAngle.left;break}R.value[_]&&R.value[_].getNode().find("Line").forEach(r=>{if(r.attrs.points){if(r.attrs.points[0]===-30||r.attrs.points[0]===30){const g=r.attrs.points[0]===-30?"left":"right",e=o.armAngle[g],i=30,h=i*Math.cos((e+(g==="left"?225:315))*Math.PI/180),B=i*Math.sin((e+(g==="left"?225:315))*Math.PI/180);r.points([g==="left"?-i:i,-20,h,B])}else if(r.attrs.points[0]===0&&r.attrs.points[2]===-20){const g=o.legAngle.left,e=30,i=e*Math.cos((g+225)*Math.PI/180),h=e*Math.sin((g+225)*Math.PI/180);r.points([0,20,i,h+20])}else if(r.attrs.points[0]===0&&r.attrs.points[2]===20){const g=o.legAngle.right,e=30,i=e*Math.cos((g+315)*Math.PI/180),h=e*Math.sin((g+315)*Math.PI/180);r.points([0,20,i,h+20])}}})}),b.value=requestAnimationFrame(E)},L=()=>{m.value||(m.value=!0,E())},P=()=>{m.value&&(m.value=!1,b.value&&(cancelAnimationFrame(b.value),b.value=null),s.forEach(n=>{n.armAngle.left=0,n.armAngle.right=0,n.legAngle.left=0,n.legAngle.right=0}))},X=()=>{s[0].x=150,s[1].x=300,s[2].x=450,s[3].x=600,s[4].x=750,s.forEach(n=>n.y=300)};return U(()=>{P()}),(n,o)=>{const _=a("el-button"),T=a("el-button-group"),r=a("el-slider"),g=a("v-rect"),e=a("v-line"),i=a("v-circle"),h=a("v-group"),B=a("v-layer"),Y=a("v-stage");return u(),p("div",J,[q("div",K,[t(T,null,{default:k(()=>[t(_,{type:"primary",onClick:L},{default:k(()=>o[1]||(o[1]=[w("全部开始")])),_:1,__:[1]}),t(_,{onClick:P},{default:k(()=>o[2]||(o[2]=[w("全部停止")])),_:1,__:[2]}),t(_,{onClick:X},{default:k(()=>o[3]||(o[3]=[w("全部重置")])),_:1,__:[3]})]),_:1}),t(r,{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=M=>c.value=M),min:1,max:10,label:"动画速度",style:{width:"200px","margin-left":"20px"}},null,8,["modelValue"])]),t(Y,{ref:"stage",config:y},{default:k(()=>[t(B,{ref:"layer"},{default:k(()=>[t(g,{config:{x:0,y:0,width:y.width,height:y.height,fill:"#f0f0f0"}},null,8,["config"]),t(e,{config:{points:[0,350,y.width,350],stroke:"#888",strokeWidth:2,dash:[10,5]}},null,8,["config"]),(u(!0),p(A,null,z(s,(M,l)=>(u(),H(h,{key:l,ref_for:!0,ref:C=>{C&&(R.value[l]=C)},config:{x:M.x,y:M.y,draggable:!0,dragBoundFunc:C=>F(C,l)}},{default:k(()=>[t(e,{config:N(l)},null,8,["config"]),l===0?(u(),p(A,{key:0},[t(i,{config:v(l)},null,8,["config"]),t(e,{config:I(l,"left")},null,8,["config"]),t(e,{config:I(l,"right")},null,8,["config"]),t(e,{config:d(l,"left")},null,8,["config"]),t(e,{config:d(l,"right")},null,8,["config"]),t(i,{config:f(l,"left")},null,8,["config"]),t(i,{config:f(l,"right")},null,8,["config"]),t(e,{config:D(l)},null,8,["config"])],64)):l===1?(u(),p(A,{key:1},[t(i,{config:v(l)},null,8,["config"]),t(e,{config:{points:[-30,-40,-30,-80],stroke:"#333",strokeWidth:3}}),t(e,{config:{points:[30,-40,30,-80],stroke:"#333",strokeWidth:3}}),t(e,{config:d(l,"left")},null,8,["config"]),t(e,{config:d(l,"right")},null,8,["config"]),t(i,{config:f(l,"left")},null,8,["config"]),t(i,{config:f(l,"right")},null,8,["config"]),t(e,{config:{points:[-8,-45,8,-45],stroke:"#333",strokeWidth:2,lineCap:"round"}})],64)):l===2?(u(),p(A,{key:2},[t(i,{config:v(l)},null,8,["config"]),t(e,{config:{points:[-30,-20,-50,0],stroke:"#333",strokeWidth:3}}),t(e,{config:{points:[30,-20,50,0],stroke:"#333",strokeWidth:3}}),t(e,{config:{points:[0,20,-30,60],stroke:"#333",strokeWidth:3}}),t(e,{config:{points:[0,20,30,60],stroke:"#333",strokeWidth:3}}),t(i,{config:f(l,"left")},null,8,["config"]),t(i,{config:f(l,"right")},null,8,["config"]),t(e,{config:{points:[-8,-45,8,-45],stroke:"#333",strokeWidth:2,lineCap:"round"}})],64)):l===3?(u(),p(A,{key:3},[t(i,{config:v(l)},null,8,["config"]),t(e,{config:{points:[-30,-20,-50,-40],stroke:"#333",strokeWidth:3}}),t(e,{config:{points:[30,-20,50,-10],stroke:"#333",strokeWidth:3}}),t(e,{config:d(l,"left")},null,8,["config"]),t(e,{config:d(l,"right")},null,8,["config"]),t(i,{config:f(l,"left")},null,8,["config"]),t(i,{config:f(l,"right")},null,8,["config"]),t(e,{config:{points:[-8,-45,0,-40,8,-45],stroke:"#333",strokeWidth:2,lineCap:"round"}})],64)):l===4?(u(),p(A,{key:4},[t(i,{config:v(l)},null,8,["config"]),t(e,{config:{points:[-30,-20,-50,-50],stroke:"#ff6b6b",strokeWidth:3}}),t(e,{config:{points:[30,-20,50,-50],stroke:"#ff6b6b",strokeWidth:3}}),t(e,{config:{points:[0,20,-30,80],stroke:"#ff6b6b",strokeWidth:3}}),t(e,{config:{points:[0,20,30,80],stroke:"#ff6b6b",strokeWidth:3}}),t(i,{config:f(l,"left")},null,8,["config"]),t(i,{config:f(l,"right")},null,8,["config"]),t(e,{config:{points:[-8,-45,8,-45],stroke:"#ff6b6b",strokeWidth:2,lineCap:"round"}})],64)):S("",!0)]),_:2},1032,["config"]))),128))]),_:1},512)]),_:1},8,["config"])])}}}),$=G(O,[["__scopeId","data-v-40c137db"]]);export{$ as default};
