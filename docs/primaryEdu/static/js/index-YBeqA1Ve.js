import{a1 as z,k as u,e as i,g as t,d as F,a as $,p as V,aF as G,aG as Y,b as y,w as p,f as l,z as B,i as N,j as a,h as r,$ as K,t as S,u as d,v as Q,q as W,T as X,ah as Z,I as j,E as ee,G as te,A as se,_ as oe}from"./index-DkZ5200C.js";import{S as ne}from"./sortable.esm-VSgMS8pS.js";import{_ as le}from"./form.vue_vue_type_script_setup_true_lang-BpNkWlDx.js";import"./mock-BsX5uS7a.js";const ae="/primaryEdu/static/jpg/1-CNu9tHLV.jpg",ie="/primaryEdu/static/jpg/2-Dn7NyzRJ.jpg",re="/primaryEdu/static/jpg/3-BNVYzMvF.jpg",pe={viewBox:"0 0 1024 1024",width:"30",height:"30"};function de(b,s){return i(),u("svg",pe,s[0]||(s[0]=[t("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"},null,-1)]))}const ue=z({name:"ep-plus",render:de}),ce={viewBox:"0 0 24 24",width:"1em",height:"1em"};function me(b,s){return i(),u("svg",ce,s[0]||(s[0]=[t("path",{fill:"currentColor",d:"M12 3c5.392 0 9.878 3.88 10.819 9c-.94 5.12-5.427 9-10.819 9s-9.878-3.88-10.818-9C2.122 6.88 6.608 3 12 3m0 16a9.005 9.005 0 0 0 8.778-7a9.005 9.005 0 0 0-17.555 0A9.005 9.005 0 0 0 12 19m0-2.5a4.5 4.5 0 1 1 0-9a4.5 4.5 0 0 1 0 9m0-2a2.5 2.5 0 1 0 0-5a2.5 2.5 0 0 0 0 5"},null,-1)]))}const _e=z({name:"ri-eye-line",render:me}),ve={viewBox:"0 0 24 24",width:"1em",height:"1em"};function ge(b,s){return i(),u("svg",ve,s[0]||(s[0]=[t("path",{fill:"currentColor",d:"M17 6h5v2h-2v13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8H2V6h5V3a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1zm1 2H6v12h12zM9 4v2h6V4z"},null,-1)]))}const fe=z({name:"ri-delete-bin-7-line",render:ge}),xe={class:"card-header"},he={key:0,class:"mt-[35%]! m-auto"},ye=["onMouseenter"],be=["src"],we=["onClick"],ke=["onClick"],Ce={title:"移除",class:"hover:text-[var(--el-color-danger)]"},$e={key:0,effect:"dark",round:"",size:"large",type:"info",class:"img-name"},je={class:"text-[#fff] dark:text-black"},ze={class:"flex justify-between"},Ie={class:"flex flex-wrap"},Ee={class:"text-[red] text-[12px] flex flex-auto items-center justify-end"},Me=F({name:"PureUpload",__name:"index",setup(b){const s=$([]),L=Z(),c=$(0),f=$(!1),A=V(()=>G(s.value,"url")),U=V(()=>Y(s.value,"name","size")),D=o=>new URL(Object.assign({"./imgs/1.jpg":ae,"./imgs/2.jpg":ie,"./imgs/3.jpg":re})[`./imgs/${o}.jpg`],import.meta.url).href,I=Array.from({length:3}).map((o,e)=>D(e+1)),H=o=>{if(!["image/jpeg","image/png","image/gif"].includes(o.type))return j("只能上传图片"),!1;if(o.size/1024/1024>2)return j("单个图片大小不能超过2MB"),!1},O=()=>{j("最多上传3张图片，请先删除在上传")},R=o=>{s.value.splice(s.value.indexOf(o),1)},J=o=>{c.value=s.value.findIndex(e=>e.uid===o.uid),f.value=!0},E=()=>document.querySelectorAll("#pure-upload-item"),P=o=>{var x,_,h;const e="el-upload-list",m=s.value.findIndex(v=>v.uid===o);(h=(_=(x=E())==null?void 0:x[m])==null?void 0:_.classList)==null||h.add(`${e}__item-actions`);const w=document.querySelector(`.${e}`);ne.create(w,{handle:`.${e}__item`,onEnd:({newIndex:v,oldIndex:g})=>{const k=s.value[g];s.value.splice(g,1),s.value.splice(v,0,k),E().forEach(C=>{C.classList.remove(`${e}__item-actions`)})}})},T=()=>{[{name:"巴旦木.jpeg",type:"img"},{name:"恭喜发财.png",type:"img"},{name:"可爱动物.gif",type:"gif"},{name:"pure-upload.csv",type:"other"},{name:"pure-upload.txt",type:"other"}].forEach(o=>{ee.get(`https://xiaoxian521.github.io/hyperlink/${o.type}/${o.name}`,{responseType:"blob"}).then(({data:e})=>{te(e,o.name)})})};return(o,e)=>{const m=r("el-link"),w=r("el-button"),x=r("el-progress"),_=r("IconifyIconOffline"),h=r("el-upload"),v=r("el-image-viewer"),g=r("el-divider"),k=r("el-image"),C=r("el-card"),q=se("tippy");return i(),y(C,{shadow:"never"},{header:p(()=>[t("div",xe,[B((i(),y(m,{href:"https://element-plus.org/zh-CN/component/upload.html",target:"_blank",style:{"font-size":"16px","font-weight":"800"}},{default:p(()=>e[4]||(e[4]=[a(" 文件上传 ")])),_:1,__:[4]})),[[q,{content:"点击查看详细文档"}]])]),l(m,{class:"mt-2",href:"https://github.com/pure-admin/vue-pure-admin/blob/main/src/views/components/upload",target:"_blank"},{default:p(()=>e[5]||(e[5]=[a(" 代码位置 src/views/components/upload ")])),_:1,__:[5]})]),default:p(()=>[l(w,{class:"mb-4!",text:"",bg:"",onClick:T},{default:p(()=>e[6]||(e[6]=[a(" 点击下载安全文件进行上传测试 ")])),_:1,__:[6]}),e[15]||(e[15]=t("p",{class:"mb-4!"},[a(" 综合示例"),t("span",{class:"text-[14px]"},[a(" （ "),t("span",{class:"text-[red]"},"自动上传"),a(" 、拖拽上传、拖拽排序、设置请求头、上传进度、大图预览、多选文件、最大文件数量、文件类型限制、文件大小限制、删除文件） ")])],-1)),B(t("p",{class:"mb-4!"},S(U.value),513),[[K,s.value.length>0]]),l(h,{"file-list":s.value,"onUpdate:fileList":e[0]||(e[0]=n=>s.value=n),drag:"",multiple:"",class:"pure-upload","list-type":"picture-card",accept:"image/jpeg,image/png,image/gif",action:"https://run.mocky.io/v3/3aa761d7-b0b3-4a03-96b3-6168d4f7467b",limit:3,headers:{Authorization:"eyJhbGciOiJIUzUxMiJ9.admin"},"on-exceed":O,"before-upload":H},{file:p(({file:n})=>[n.status=="ready"||n.status=="uploading"?(i(),u("div",he,[e[7]||(e[7]=t("p",{class:"font-medium"},"文件上传中",-1)),l(x,{class:"mt-2!","stroke-width":2,"text-inside":!0,"show-text":!1,percentage:n.percentage},null,8,["percentage"])])):(i(),u("div",{key:1,onMouseenter:W(M=>P(n.uid),["stop"])},[t("img",{class:"el-upload-list__item-thumbnail select-none",src:n.url},null,8,be),t("span",{id:"pure-upload-item",class:Q(["el-upload-list__item-actions",s.value.length>1&&"cursor-move!"])},[t("span",{title:"查看",class:"hover:text-primary",onClick:M=>J(n)},[l(_,{icon:d(_e),class:"hover:scale-125 duration-100"},null,8,["icon"])],8,we),t("span",{class:"el-upload-list__item-delete",onClick:M=>R(n)},[t("span",Ce,[l(_,{icon:d(fe),class:"hover:scale-125 duration-100"},null,8,["icon"])])],8,ke)],2)],40,ye))]),default:p(()=>[l(d(ue),{class:"m-auto mt-4"})]),_:1},8,["file-list"]),f.value?(i(),y(v,{key:0,initialIndex:c.value,"url-list":A.value,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,onClose:e[1]||(e[1]=n=>f.value=!1),onSwitch:e[2]||(e[2]=n=>c.value=n)},null,8,["initialIndex","url-list"])):N("",!0),(i(),y(X,{to:"body"},[s.value[c.value]&&f.value?(i(),u("div",$e,[t("p",je,S(s.value[c.value].name),1)])):N("",!0)])),e[16]||(e[16]=t("p",{class:"el-upload__tip"}," 可拖拽上传最多3张单个不超过2MB且格式为jpeg/png/gif的图片 ",-1)),l(g),e[17]||(e[17]=t("p",{class:"my-4!"},[a(" 结合表单校验进行"),t("span",{class:"text-[red]"},"手动上传"),t("span",{class:"text-[14px]"}," （可先打开浏览器控制台找到Network，然后填写表单内容后点击点提交观察请求变化） ")],-1)),t("div",ze,[l(le),t("div",null,[e[8]||(e[8]=t("p",{class:"text-center"},"上传接口相关截图",-1)),l(k,{class:"w-[200px] rounded-md",src:d(I)[0],"preview-src-list":d(I),fit:"cover"},null,8,["src","preview-src-list"])])]),l(g),t("div",Ie,[t("p",null,[e[9]||(e[9]=a(" 裁剪、上传头像请参考 ")),t("span",{class:"font-bold text-[18x] cursor-pointer hover:text-[red]",onClick:e[3]||(e[3]=n=>d(L).push({name:"SystemUser"}))}," 系统管理-用户管理 "),e[10]||(e[10]=a(" 表格操作栏中的上传头像功能 "))]),t("p",Ee,[e[12]||(e[12]=a(" 免责声明：上传接口使用免费开源的 ")),l(m,{href:"https://designer.mocky.io/",target:"_blank",style:{"font-size":"16px","font-weight":"800"}},{default:p(()=>e[11]||(e[11]=[a("  Mocky  ")])),_:1,__:[11]}),e[13]||(e[13]=t("span",{class:"font-bold text-[18x]"}," 请不要上传重要信息 ",-1)),e[14]||(e[14]=a("，如果造成任何损失，我们概不负责 "))])])]),_:1,__:[15,16,17]})}}}),Le=oe(Me,[["__scopeId","data-v-7fdf15b9"]]);export{Le as default};
