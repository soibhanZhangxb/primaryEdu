import{D as ie}from"./dutils-0Z0zhYva.js";import re from"./DrawingTool-DgGeCmIX.js";import{d as ue,a as g,p as N,m as de,n as ce,k as b,e as p,g as n,f as a,w as S,h as y,i as A,F as _,l as T,b as J,aP as fe,t as k,j as H,_ as ve}from"./index-DkZ5200C.js";const ge={class:"flex flex-col md:flex-row gap-6 p-4 bg-gray-50 shadow mkonva"},pe={class:"flex-1"},me={class:"border rounded-lg overflow-hidden bg-white"},be={class:"p-2 flex justify-between items-center border-left-blue"},xe={class:"flex gap-2"},he={class:"relative"},ye={class:"w-full md:w-80 space-y-6"},_e={class:"bg-white p-4 rounded-lg shadow"},we={class:"space-y-4"},ke={class:"block text-sm font-medium text-gray-700 mb-1"},Se={class:"block text-sm font-medium text-gray-700 mb-1"},$e={class:"bg-white p-4 rounded-lg shadow"},Ce={class:"step-controls"},Pe={class:"mt-3 text-center text-sm text-gray-600"},De={class:"bg-white p-4 rounded-lg shadow"},Ve={class:"result-box"},We={class:"text-sm font-medium text-gray-700"},Ae={class:"text-2xl font-mono mt-2 text-blue-600 font-bold"},He={key:0,class:"text-sm text-gray-500 mt-2"},C=940,B=580,f=120,m=60,v=40,Re=ue({name:"ClimbStairsVisualizer",__name:"ntest",setup(Ie){const o={x:C/2,y:B-80},G=g({lines:[],labels:[]}),u=g(5),R=g(500),P=g(!1),d=g(0),D=g(0),I=g([]),h=g([]),K=g(!0),U=g(!1);g({x:0,y:0});const F=g(null),M=g(null),x={currentStep:"#ff7875",dpCell:"#95de64",stairs:"#e6a23c",human:"#409eff",text:"#314659",arrow:"#597ef7",background:"#f9fafc"},L=()=>{const l=u.value,t=[],s=new Array(l+1).fill(0);s[0]=1,l>=1&&(s[1]=1),t.push({description:"初始化DP数组：dp[0] = 1（0级台阶1种方法），dp[1] = 1（1级台阶1种方法）",dp:[...s],humanPos:{x:o.x-v/2,y:o.y-v},currentStair:0,highlight:[0,1]});for(let e=2;e<=l;e++)s[e]=s[e-1]+s[e-2],t.push({description:`计算dp[${e}]：到达第${e}级台阶可从第${e-1}级跨1步或第${e-2}级跨2步，故dp[${e}] = dp[${e-1}] + dp[${e-2}] = ${s[e-1]} + ${s[e-2]} = ${s[e]}`,dp:[...s],humanPos:{x:o.x-v/2+(e-1)*f/2,y:o.y-v-(e-1)*m/2},currentStair:e,highlight:[e-2,e-1,e]});t.push({description:`计算完成！爬上${l}级台阶共有${s[l]}种不同方法`,dp:[...s],humanPos:{x:o.x-v/2+(l-1)*f,y:o.y-v-l*m},currentStair:l,highlight:[l]}),Q(l).forEach((e,V)=>{t.push({description:`方案${V+1}：${e.description}`,dp:[...s],humanPos:X(e.steps),currentStair:l,highlight:[l],currentPlan:e})}),h.value=t,D.value=h.value.length,I.value=s,d.value=0},Q=l=>{const t=[],s=(i,e)=>{if(i===l){t.push({steps:[...e],description:e.map(V=>`跨${V}步`).join(" → ")});return}i>l||(e.push(1),s(i+1,e),e.pop(),e.push(2),s(i+2,e),e.pop())};return s(0,[]),t},X=(l,t)=>{let s=0;return l.forEach(i=>{s+=i}),{x:o.x-v/2+(s-1)*f,y:o.y-v-s*m}};let j=null;const Y=()=>{if(P.value){$();return}P.value=!0,j=setInterval(()=>{d.value<D.value-1?d.value++:$()},1500-R.value)},$=()=>{P.value=!1,j&&(clearInterval(j),j=null)},ee=()=>{$(),d.value>0&&d.value--},te=()=>{$(),d.value<D.value-1&&d.value++},le=()=>{$(),d.value=0},O=()=>{u.value<1&&(u.value=1),u.value>10&&(u.value=10),$(),L()},se=N(()=>{var l;return((l=h.value[d.value])==null?void 0:l.description)||"请点击计算按钮开始演示"}),z=N(()=>h.value.length?h.value[d.value].humanPos:{x:o.x-v/2,y:o.y-v}),ne=N(()=>{var l;return((l=h.value[d.value])==null?void 0:l.highlight)||[]}),w=N(()=>{var l;return((l=h.value[d.value])==null?void 0:l.currentPlan)||null}),E=(l,t)=>l.slice(0,t+1).reduce((s,i)=>s+i,0);return de(()=>{G.value=ie.drawGrid(C,B,{x:0,y:0},50),L()}),ce(u,O),(l,t)=>{const s=y("v-line"),i=y("v-text"),e=y("v-rect"),V=y("v-circle"),ae=y("v-arrow"),Z=y("v-layer"),oe=y("v-stage"),q=y("el-slider"),W=y("el-button");return p(),b("div",ge,[n("div",pe,[n("div",me,[n("div",null,[n("div",be,[t[3]||(t[3]=n("div",{class:"bg-gray"},"爬楼梯算法动画演示",-1)),n("div",xe,[a(re,{enableDrawing:U.value,"onUpdate:enableDrawing":t[0]||(t[0]=r=>U.value=r),stageRef:F.value,drawingLayerRef:M.value},null,8,["enableDrawing","stageRef","drawingLayerRef"])])]),n("div",he,[a(oe,{ref_key:"stageRef",ref:F,config:{width:C,height:B,fill:x.background}},{default:S(()=>[a(Z,null,{default:S(()=>[K.value?(p(!0),b(_,{key:0},T(G.value.lines,(r,c)=>(p(),J(s,{key:"line-"+c,config:r},null,8,["config"]))),128)):A("",!0),a(i,{config:{x:20,y:20,text:se.value,fontSize:18,width:C-40,fill:x.text,wrap:"word"}},null,8,["config"]),h.value.length?(p(),b(_,{key:1},[a(i,{config:{x:20,y:60,text:"DP数组（dp[i]表示爬上i级台阶的方法数）:",fontSize:16,fill:x.text}},null,8,["config"]),(p(!0),b(_,null,T(h.value[d.value].dp,(r,c)=>(p(),b(_,{key:`dp-cell-${c}`},[a(e,{config:{x:20+c*80,y:90,width:70,height:40,fill:ne.value.includes(c)?x.currentStep:x.dpCell,stroke:"#ddd",strokeWidth:2,cornerRadius:4}},null,8,["config"]),a(i,{config:{x:20+c*80,y:90,text:`dp[${c}]`,fontSize:14,width:70,height:20,align:"center",verticalAlign:"middle",fill:x.text}},null,8,["config"]),a(i,{config:{x:20+c*80,y:110,text:r.toString(),fontSize:16,fontWeight:"bold",width:70,height:20,align:"center",verticalAlign:"middle",fill:x.text}},null,8,["config"])],64))),128))],64)):A("",!0),(p(!0),b(_,null,T(u.value,r=>(p(),b(_,{key:`stair-${r}`},[a(e,{config:{x:o.x-u.value*f/2+(r-1)*f,y:o.y-r*m,width:f,height:m,fill:x.stairs,stroke:"#d48806",strokeWidth:2}},null,8,["config"]),a(i,{config:{x:o.x-u.value*f/2+(r-1)*f,y:o.y-r*m+m/2,text:`第${r}级`,fontSize:16,width:f,height:m,align:"center",verticalAlign:"middle",fill:"#fff",fontWeight:"bold"}},null,8,["config"])],64))),128)),a(e,{config:{x:0,y:o.y,width:C,height:20,fill:"#909399",stroke:"#606266",strokeWidth:2}},null,8,["config"]),a(V,{config:{x:z.value.x+v/2,y:z.value.y+v/2,radius:v/2,fill:x.human,stroke:"#1890ff",strokeWidth:2}},null,8,["config"]),a(i,{config:{x:z.value.x,y:z.value.y,text:"人",fontSize:20,width:v,height:v,align:"center",verticalAlign:"middle",fill:"#fff",fontWeight:"bold"}},null,8,["config"]),w.value?(p(),b(_,{key:2},[a(i,{config:{x:C-300,y:60,text:`当前方案：${w.value.description}`,fontSize:16,fill:"#ff4d4f",fontWeight:"bold"}},null,8,["config"]),(p(!0),b(_,null,T(w.value.steps,(r,c)=>(p(),b(_,{key:`plan-arrow-${c}`},[c<w.value.steps.length-1?(p(),J(ae,{key:0,config:{points:[o.x-u.value*f/2+(E(w.value.steps,c)-1)*f+f/2,o.y-E(w.value.steps,c)*m+m/2,o.x-u.value*f/2+E(w.value.steps,c+1)*f-f/2,o.y-E(w.value.steps,c+1)*m+m/2],stroke:x.arrow,strokeWidth:3,fill:"none",pointerLength:10,pointerWidth:8}},null,8,["config"])):A("",!0)],64))),128))],64)):A("",!0)]),_:1}),a(Z,{ref_key:"drawingLayerRef",ref:M},null,512)]),_:1},8,["config"])])])])]),n("div",ye,[t[11]||(t[11]=fe('<div class="bg-white p-4 rounded-lg shadow border-left-blue" data-v-b05ec5b3><h3 class="text-lg font-semibold mb-4 text-gray-800" data-v-b05ec5b3>算法信息:</h3><div class="space-y-3" data-v-b05ec5b3><div class="flex items-center justify-between h-full" data-v-b05ec5b3><p class="text-sm text-gray-600" data-v-b05ec5b3>问题描述</p><p class="text-sm text-gray-800" data-v-b05ec5b3> 一个人每次可以爬1级或2级台阶，求爬上n级台阶的不同方法数 </p></div><div class="flex items-center justify-between h-full" data-v-b05ec5b3><p class="text-sm text-gray-600" data-v-b05ec5b3>核心公式</p><p class="text-xl font-mono font-bold text-blue-600" data-v-b05ec5b3> dp[i] = dp[i-1] + dp[i-2] </p></div><div class="flex items-center justify-between h-full" data-v-b05ec5b3><p class="text-sm text-gray-600" data-v-b05ec5b3>时间复杂度</p><p class="text-lg font-mono font-bold text-blue-600" data-v-b05ec5b3>O(n)</p></div><div class="flex items-center justify-between h-full" data-v-b05ec5b3><p class="text-sm text-gray-600" data-v-b05ec5b3>空间复杂度</p><p class="text-lg font-mono font-bold text-blue-600" data-v-b05ec5b3>O(n)</p></div></div></div>',1)),n("div",_e,[t[5]||(t[5]=n("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"参数控制",-1)),n("div",we,[n("div",null,[n("label",ke," 台阶数量: "+k(u.value)+" 级 ",1),a(q,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=r=>u.value=r),min:1,max:10,step:1,onChange:O},null,8,["modelValue"])]),n("div",null,[n("label",Se," 动画速度: "+k(R.value),1),a(q,{modelValue:R.value,"onUpdate:modelValue":t[2]||(t[2]=r=>R.value=r),min:100,max:900,step:50},null,8,["modelValue"])]),a(W,{type:"primary",class:"w-full",onClick:L},{default:S(()=>t[4]||(t[4]=[H(" 重新计算 ")])),_:1,__:[4]})])]),n("div",$e,[t[9]||(t[9]=n("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"步骤控制",-1)),n("div",Ce,[a(W,{disabled:d.value===0,onClick:ee},{default:S(()=>t[6]||(t[6]=[H(" 上一步 ")])),_:1,__:[6]},8,["disabled"]),a(W,{disabled:d.value>=D.value-1,onClick:te},{default:S(()=>t[7]||(t[7]=[H(" 下一步 ")])),_:1,__:[7]},8,["disabled"]),a(W,{type:P.value?"danger":"success",onClick:Y},{default:S(()=>[H(k(P.value?"暂停":"播放"),1)]),_:1},8,["type"]),a(W,{onClick:le},{default:S(()=>t[8]||(t[8]=[H("重新开始")])),_:1,__:[8]})]),n("div",Pe," 步骤: "+k(d.value+1)+" / "+k(D.value),1)]),n("div",De,[t[10]||(t[10]=n("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"计算结果",-1)),n("div",Ve,[n("p",We," 爬上"+k(u.value)+"级台阶的方法数: ",1),n("p",Ae,k(I.value[u.value]||0)+" 种 ",1),I.value.length>0?(p(),b("p",He," DP数组: ["+k(I.value.join(", "))+"] ",1)):A("",!0)])])])])}}}),Ne=ve(Re,[["__scopeId","data-v-b05ec5b3"]]);export{Ne as default};
